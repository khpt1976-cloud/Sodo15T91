<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S∆° ƒë·ªì Ki·∫øn tr√∫c Microservice</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a2332 0%, #2c3e50 100%);
            min-height: 100vh;
            overflow: hidden;
        }
        .container {
            background: rgba(26, 35, 50, 0.9);
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        h1 {
            text-align: center;
            color: white;
            margin: 0;
            padding: 15px 0;
            background: rgba(26, 35, 50, 0.95);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1000;
        }
        
        /* Toolbar c√¥ng c·ª• */
        .toolbar {
            position: fixed;
            top: 70px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding: 10px;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .tool-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 8px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tool-btn:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        
        .tool-btn:active {
            transform: scale(0.95);
        }
        
        .tool-btn.reset {
            background: #28a745;
        }
        
        .tool-btn.reset:hover {
            background: #1e7e34;
        }
        
        /* Tooltip */
        .tool-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 55px;
            top: 50%;
            transform: translateY(-50%);
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .tool-btn:hover::after {
            opacity: 1;
        }
        
        /* Container cho diagram c√≥ th·ªÉ zoom v√† pan */
        .diagram-container {
            position: absolute;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            cursor: grab;
        }
        
        .diagram-container.panning {
            cursor: grabbing;
        }
        
        .mermaid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            transition: transform 0.3s ease;
        }
        
        /* CSS ƒë·ªÉ cƒÉn gi·ªØa Frontend Applications v√† API Gateway */
        .mermaid svg {
            overflow: visible;
            width: 100%;
            height: auto;
            min-height: 100%;
        }
        
        /* Zoom level indicator */
        .zoom-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1001;
        }

        /* T√πy ch·ªânh m√†u n·ªÅn cho c√°c subgraph ch√≠nh */
        .mermaid .cluster rect {
            opacity: 0.4 !important;
        }
        
        /* Force m√†u cho c√°c subgraph b·∫±ng CSS */
        .mermaid svg g.cluster:nth-child(1) rect {
            fill: #E3F2FD !important;
        }
        .mermaid svg g.cluster:nth-child(2) rect {
            fill: #E8F5E8 !important;
        }
        .mermaid svg g.cluster:nth-child(3) rect {
            fill: #F3E5F5 !important;
        }
        .mermaid svg g.cluster:nth-child(4) rect {
            fill: #FFF3E0 !important;
        }
        
        /* ·∫®n ho√†n to√†n c√°c spacer nodes */
        .mermaid g[id*="SPACER"] {
            display: none !important;
        }
        
        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #1a2332;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-decoration: none;
            flex: 1;
        }
        
        .navbar-brand .logo {
            width: 32px;
            height: 32px;
            background: #00bcd4;
            border-radius: 6px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .navbar-menu {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 30px;
            flex: 2;
            justify-content: center;
        }
        
        .navbar-menu li a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .navbar-menu li a:hover {
            color: #00bcd4;
        }
        
        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn-login {
            background: #00bcd4;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .btn-login:hover {
            background: #00acc1;
        }
        
        /* ƒêi·ªÅu ch·ªânh body ƒë·ªÉ kh√¥ng b·ªã che b·ªüi navbar */
        body {
            padding-top: 60px;
        }
        
        /* Documentation Page */
        .documentation {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(26, 35, 50, 0.95);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            color: white;
            transform-origin: top left;
            transition: transform 0.3s ease;
            position: relative;
            cursor: grab;
        }
        
        .documentation:active {
            cursor: grabbing;
        }
        
        .doc-container {
            overflow: hidden;
            position: relative;
            width: 100%;
            height: calc(100vh - 60px);
        }
        
        .doc-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .doc-header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .doc-header p {
            color: #b0c4de;
            font-size: 1.1em;
        }
        
        .doc-section {
            margin-bottom: 40px;
            padding: 20px;
            border-left: 4px solid #00bcd4;
            background: rgba(44, 62, 80, 0.3);
            border-radius: 0 8px 8px 0;
        }
        
        .doc-section h2 {
            color: white;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .doc-section h2::before {
            content: "üì¶";
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .doc-section h3 {
            color: #00bcd4;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
            padding-left: 20px;
            border-left: 3px solid #00bcd4;
        }
        
        .doc-section p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #e0e0e0;
        }
        
        .doc-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .doc-section li {
            margin-bottom: 8px;
            color: #d0d0d0;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .component-card {
            background: rgba(44, 62, 80, 0.6);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #00bcd4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .component-card h4 {
            color: #00bcd4;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .component-card p {
            font-size: 0.9em;
            color: #d0d0d0;
            margin: 0;
        }
        
        .back-btn {
            background: #00bcd4;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
            transition: background 0.3s;
            position: fixed;
            top: 70px;
            left: 20px;
            z-index: 1000;
        }
        
        .back-btn:hover {
            background: #00acc1;
        }
        
        .doc-controls {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        
        .doc-controls button {
            background: #00bcd4;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .doc-controls button:hover {
            background: #00acc1;
        }



    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="#" class="navbar-brand">
            <div class="logo">MS</div>
            Microservice Architecture
        </a>
        
        <ul class="navbar-menu">
            <li><a href="#" onclick="showDiagram()">Trang ch·ªß</a></li>
            <li><a href="#" onclick="showDiagram()">S∆° ƒë·ªì</a></li>
            <li><a href="#" onclick="showDocumentation()">T√†i li·ªáu</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">Li√™n h·ªá</a></li>
        </ul>
        
        <div style="flex: 1;"></div>

    </nav>

    <!-- Documentation Page -->
    <div class="doc-container" id="docContainer">
        <button class="back-btn" onclick="showDiagram()">‚Üê Quay l·∫°i S∆° ƒë·ªì</button>
        
        <div class="doc-controls">
            <button onclick="zoomIn()">üîç+</button>
            <button onclick="zoomOut()">üîç-</button>
            <button onclick="resetZoom()">‚ö° Reset</button>
        </div>
        
        <div class="documentation" id="documentationPage">
        
        <div class="doc-header">
            <h1>T√†i li·ªáu Ki·∫øn tr√∫c Microservice</h1>
            <p>H∆∞·ªõng d·∫´n chi ti·∫øt v·ªÅ 56 th√†nh ph·∫ßn v√† c√°ch ch√∫ng k·∫øt h·ª£p th√†nh c√°c ·ª©ng d·ª•ng ƒë·ªôc l·∫≠p</p>
        </div>

        <div class="doc-section">
            <h2>üöÄ Implementation Roadmap - L·ªô tr√¨nh Tri·ªÉn khai</h2>
            <p>Th·ª© t·ª± ∆∞u ti√™n tri·ªÉn khai c√°c kh·ªëi d·ª±a tr√™n dependencies, business priority v√† technical complexity.</p>
            
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 12px; line-height: 1.4;">
üèóÔ∏è IMPLEMENTATION PHASES:

Phase 1: FOUNDATION (Tu·∫ßn 1-2) - 4 kh·ªëi
‚îú‚îÄ‚îÄ Infrastructure Setup
‚îÇ   ‚îú‚îÄ‚îÄ Message Broker (RabbitMQ/Kafka)
‚îÇ   ‚îú‚îÄ‚îÄ Cache (Redis Cluster) 
‚îÇ   ‚îî‚îÄ‚îÄ Databases (PostgreSQL/MongoDB clusters)
‚îî‚îÄ‚îÄ Core Authentication
    ‚îî‚îÄ‚îÄ User Service + User DB

Phase 2: API GATEWAY (Tu·∫ßn 3) - 2 kh·ªëi  
‚îú‚îÄ‚îÄ API Gateway User
‚îî‚îÄ‚îÄ API Gateway Admin

Phase 3: CORE BUSINESS (Tu·∫ßn 4-6) - 6 kh·ªëi
‚îú‚îÄ‚îÄ Product Service + Product DB
‚îú‚îÄ‚îÄ Cart Service + Cart DB  
‚îî‚îÄ‚îÄ Payment Service + Payment DB

Phase 4: CONTENT & ADMIN (Tu·∫ßn 7-8) - 6 kh·ªëi
‚îú‚îÄ‚îÄ News Service + News DB
‚îú‚îÄ‚îÄ Admin Service + Admin DB
‚îî‚îÄ‚îÄ Shell Config Service + Shell Config DB

Phase 5: ADVANCED FEATURES (Tu·∫ßn 9-12) - 8 kh·ªëi
‚îú‚îÄ‚îÄ Design Calculation Service + DB
‚îú‚îÄ‚îÄ Chatbot Service + Chatbot DB
‚îú‚îÄ‚îÄ Communication Log Service + DB
‚îî‚îÄ‚îÄ Football Service + Football DB

Phase 6: AGENT MANAGEMENT (Tu·∫ßn 13-14) - 4 kh·ªëi
‚îú‚îÄ‚îÄ Agent Management Service + DB
‚îî‚îÄ‚îÄ Agent Policy Service + DB

Phase 7: FRONTEND APPLICATIONS (Tu·∫ßn 15-18) - 26 kh·ªëi
‚îú‚îÄ‚îÄ Shell App User + Shell App Admin (2 kh·ªëi)
‚îú‚îÄ‚îÄ User Frontend Components (12 kh·ªëi)
‚îî‚îÄ‚îÄ Admin Frontend Components (12 kh·ªëi)

TOTAL: 56 kh·ªëi trong 18 tu·∫ßn
                </pre>
            </div>

            <h3>üìã Chi ti·∫øt t·ª´ng Phase:</h3>
            
            <div class="component-grid">
                <div class="component-card">
                    <h4>üèóÔ∏è Phase 1: Foundation</h4>
                    <p><strong>Th·ªùi gian:</strong> 2 tu·∫ßn ƒë·∫ßu</p>
                    <p><strong>M·ª•c ti√™u:</strong> X√¢y d·ª±ng h·∫° t·∫ßng c∆° s·ªü</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> T·∫•t c·∫£ services kh√°c ph·ª• thu·ªôc v√†o infrastructure v√† authentication</p>
                </div>
                <div class="component-card">
                    <h4>üö™ Phase 2: API Gateway</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 3</p>
                    <p><strong>M·ª•c ti√™u:</strong> Entry point cho t·∫•t c·∫£ requests</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> C·∫ßn c√≥ tr∆∞·ªõc khi tri·ªÉn khai business services</p>
                </div>
                <div class="component-card">
                    <h4>üíº Phase 3: Core Business</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 4-6</p>
                    <p><strong>M·ª•c ti√™u:</strong> Ch·ª©c nƒÉng kinh doanh c·ªët l√µi</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> T·∫°o revenue, MVP functionality</p>
                </div>
                <div class="component-card">
                    <h4>üì∞ Phase 4: Content & Admin</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 7-8</p>
                    <p><strong>M·ª•c ti√™u:</strong> Qu·∫£n l√Ω n·ªôi dung v√† h·ªá th·ªëng</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> H·ªó tr·ª£ v·∫≠n h√†nh v√† marketing</p>
                </div>
                <div class="component-card">
                    <h4>üî¨ Phase 5: Advanced Features</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 9-12</p>
                    <p><strong>M·ª•c ti√™u:</strong> T√≠nh nƒÉng n√¢ng cao, AI/ML</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> Competitive advantage, complex features</p>
                </div>
                <div class="component-card">
                    <h4>ü§ù Phase 6: Agent Management</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 13-14</p>
                    <p><strong>M·ª•c ti√™u:</strong> Qu·∫£n l√Ω ƒë·∫°i l√Ω v√† ch√≠nh s√°ch</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> Business expansion, partner management</p>
                </div>
                <div class="component-card">
                    <h4>üé® Phase 7: Frontend Apps</h4>
                    <p><strong>Th·ªùi gian:</strong> Tu·∫ßn 15-18</p>
                    <p><strong>M·ª•c ti√™u:</strong> Giao di·ªán ng∆∞·ªùi d√πng ho√†n ch·ªânh</p>
                    <p><strong>L√Ω do ∆∞u ti√™n:</strong> User experience, sau khi backend ·ªïn ƒë·ªãnh</p>
                </div>
            </div>
        </div>

        <div class="doc-section">
            <h2>Frontend Applications (·ª®ng d·ª•ng Giao di·ªán)</h2>
            <p>L·ªõp giao di·ªán ng∆∞·ªùi d√πng, bao g·ªìm c√°c ·ª©ng d·ª•ng web v√† mobile cho ng∆∞·ªùi d√πng cu·ªëi v√† qu·∫£n tr·ªã vi√™n.</p>
            
            <h3>üèóÔ∏è Ki·∫øn tr√∫c Frontend Domain</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 12px; line-height: 1.4;">
Frontend Architecture Flow:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Shell App     ‚îÇ    ‚îÇ   Shell App     ‚îÇ
‚îÇ     User        ‚îÇ    ‚îÇ     Admin       ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ Routing       ‚îÇ    ‚îÇ ‚Ä¢ Admin Routes  ‚îÇ
‚îÇ ‚Ä¢ Auth Guard    ‚îÇ    ‚îÇ ‚Ä¢ Role Check    ‚îÇ
‚îÇ ‚Ä¢ State Mgmt    ‚îÇ    ‚îÇ ‚Ä¢ Audit Logs    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                      ‚îÇ
          ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Micro-Frontend Components             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ User FE     ‚îÇ Admin FE    ‚îÇ Shared Components   ‚îÇ
‚îÇ (12 kh·ªëi)   ‚îÇ (12 kh·ªëi)   ‚îÇ ‚Ä¢ UI Library        ‚îÇ
‚îÇ             ‚îÇ             ‚îÇ ‚Ä¢ Common Utils      ‚îÇ
‚îÇ ‚Ä¢ Cart FE   ‚îÇ ‚Ä¢ Cart Admin‚îÇ ‚Ä¢ Auth Components   ‚îÇ
‚îÇ ‚Ä¢ Product FE‚îÇ ‚Ä¢ Prod Admin‚îÇ ‚Ä¢ Error Handling    ‚îÇ
‚îÇ ‚Ä¢ News FE   ‚îÇ ‚Ä¢ News Admin‚îÇ ‚Ä¢ Loading States    ‚îÇ
‚îÇ ‚Ä¢ ...       ‚îÇ ‚Ä¢ ...       ‚îÇ ‚Ä¢ Form Validation   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                      ‚îÇ
          ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              API Gateway Layer                  ‚îÇ
‚îÇ  ‚Ä¢ Authentication & Authorization               ‚îÇ
‚îÇ  ‚Ä¢ Request Routing & Load Balancing            ‚îÇ
‚îÇ  ‚Ä¢ Rate Limiting & Caching                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            
            <h3>Shell App User (·ª®ng d·ª•ng Shell Ng∆∞·ªùi d√πng)</h3>
            <p><strong>Nhi·ªám v·ª•:</strong> L√† ·ª©ng d·ª•ng ch√≠nh (shell) t√≠ch h·ª£p t·∫•t c·∫£ c√°c micro-frontend cho ng∆∞·ªùi d√πng cu·ªëi.</p>
            <ul>
                <li>Qu·∫£n l√Ω routing v√† navigation gi·ªØa c√°c module</li>
                <li>X·ª≠ l√Ω authentication v√† authorization</li>
                <li>Chia s·∫ª state v√† context chung</li>
                <li>T·ªëi ∆∞u h√≥a performance v√† loading</li>
            </ul>

            <h3>Shell App Admin (·ª®ng d·ª•ng Shell Qu·∫£n tr·ªã)</h3>
            <p><strong>Nhi·ªám v·ª•:</strong> ·ª®ng d·ª•ng shell ri√™ng bi·ªát cho c√°c ch·ª©c nƒÉng qu·∫£n tr·ªã h·ªá th·ªëng.</p>
            <ul>
                <li>Qu·∫£n l√Ω dashboard v√† b√°o c√°o</li>
                <li>ƒêi·ªÅu khi·ªÉn quy·ªÅn truy c·∫≠p v√† ph√¢n quy·ªÅn</li>
                <li>Gi√°m s√°t h·ªá th·ªëng v√† logs</li>
                <li>C·∫•u h√¨nh v√† thi·∫øt l·∫≠p h·ªá th·ªëng</li>
            </ul>

            <h3>User Frontend Components (12 kh·ªëi)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service Frontend</h4>
                    <p>Giao di·ªán qu·∫£n l√Ω gi·ªè h√†ng, th√™m/x√≥a s·∫£n ph·∫©m, t√≠nh to√°n t·ªïng ti·ªÅn</p>
                </div>
                <div class="component-card">
                    <h4>Product Service Frontend</h4>
                    <p>Hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m, chi ti·∫øt s·∫£n ph·∫©m, t√¨m ki·∫øm v√† l·ªçc</p>
                </div>
                <div class="component-card">
                    <h4>News Service Frontend</h4>
                    <p>Hi·ªÉn th·ªã tin t·ª©c, b√†i vi·∫øt, th√¥ng b√°o cho ng∆∞·ªùi d√πng</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Frontend</h4>
                    <p>C√¥ng c·ª• t√≠nh to√°n thi·∫øt k·∫ø, m√¥ ph·ªèng v√† visualization</p>
                </div>
                <div class="component-card">
                    <h4>Football Service Frontend</h4>
                    <p>Giao di·ªán d·ªãch v·ª• b√≥ng ƒë√°, l·ªãch thi ƒë·∫•u, k·∫øt qu·∫£</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Frontend</h4>
                    <p>Giao di·ªán nh·∫≠t k√Ω thi c√¥ng, theo d√µi ti·∫øn ƒë·ªô d·ª± √°n</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service Frontend</h4>
                    <p>Giao di·ªán chat bot, h·ªó tr·ª£ kh√°ch h√†ng t·ª± ƒë·ªông</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service Frontend</h4>
                    <p>Giao di·ªán thanh to√°n, x·ª≠ l√Ω giao d·ªãch, l·ªãch s·ª≠ thanh to√°n</p>
                </div>
                <div class="component-card">
                    <h4>User Service Frontend</h4>
                    <p>Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n, ƒëƒÉng k√Ω, ƒëƒÉng nh·∫≠p</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service Frontend</h4>
                    <p>Giao di·ªán qu·∫£n tr·ªã t·ªïng th·ªÉ, dashboard, b√°o c√°o</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Frontend</h4>
                    <p>Qu·∫£n l√Ω ƒë·∫°i l√Ω, th√¥ng tin ƒë·ªëi t√°c, hoa h·ªìng</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Frontend</h4>
                    <p>Qu·∫£n l√Ω ch√≠nh s√°ch ƒë·∫°i l√Ω, quy ƒë·ªãnh, ƒëi·ªÅu kho·∫£n</p>
                </div>
            </div>

            <h3>Admin Frontend Components (12 kh·ªëi)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service Admin</h4>
                    <p>Qu·∫£n tr·ªã gi·ªè h√†ng: xem t·∫•t c·∫£ gi·ªè h√†ng, th·ªëng k√™, qu·∫£n l√Ω abandoned carts</p>
                </div>
                <div class="component-card">
                    <h4>Product Service Admin</h4>
                    <p>Qu·∫£n tr·ªã s·∫£n ph·∫©m: CRUD s·∫£n ph·∫©m, qu·∫£n l√Ω inventory, pricing, categories</p>
                </div>
                <div class="component-card">
                    <h4>News Service Admin</h4>
                    <p>Qu·∫£n tr·ªã tin t·ª©c: t·∫°o/s·ª≠a/x√≥a b√†i vi·∫øt, qu·∫£n l√Ω categories, scheduling</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Admin</h4>
                    <p>Qu·∫£n tr·ªã t√≠nh to√°n thi·∫øt k·∫ø: c·∫•u h√¨nh formulas, templates, validation rules</p>
                </div>
                <div class="component-card">
                    <h4>Football Service Admin</h4>
                    <p>Qu·∫£n tr·ªã b√≥ng ƒë√°: qu·∫£n l√Ω l·ªãch thi ƒë·∫•u, teams, results, statistics</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Admin</h4>
                    <p>Qu·∫£n tr·ªã nh·∫≠t k√Ω thi c√¥ng: xem logs, reports, project tracking</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service Admin</h4>
                    <p>Qu·∫£n tr·ªã chatbot: training data, responses, analytics, conversation flows</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service Admin</h4>
                    <p>Qu·∫£n tr·ªã thanh to√°n: transaction monitoring, refunds, payment methods</p>
                </div>
                <div class="component-card">
                    <h4>User Service Admin</h4>
                    <p>Qu·∫£n tr·ªã ng∆∞·ªùi d√πng: user management, roles, permissions, account status</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service Admin</h4>
                    <p>Qu·∫£n tr·ªã h·ªá th·ªëng: system settings, monitoring, logs, maintenance</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Admin</h4>
                    <p>Qu·∫£n tr·ªã ƒë·∫°i l√Ω: agent registration, hierarchy, performance tracking</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Admin</h4>
                    <p>Qu·∫£n tr·ªã ch√≠nh s√°ch ƒë·∫°i l√Ω: policy creation, compliance monitoring</p>
                </div>
            </div>
        </div>

        <div class="doc-section">
            <h2>API Gateway (C·ªïng API)</h2>
            <p>ƒêi·ªÉm truy c·∫≠p duy nh·∫•t cho t·∫•t c·∫£ c√°c request t·ª´ client ƒë·∫øn backend services.</p>
            
            <h3>API Gateway User</h3>
            <p><strong>Nhi·ªám v·ª•:</strong> X·ª≠ l√Ω c√°c request t·ª´ ·ª©ng d·ª•ng ng∆∞·ªùi d√πng cu·ªëi.</p>
            <ul>
                <li>Authentication v√† authorization cho user</li>
                <li>Rate limiting v√† throttling</li>
                <li>Request routing ƒë·∫øn c√°c microservices</li>
                <li>Response aggregation v√† transformation</li>
            </ul>

            <h3>API Gateway Admin</h3>
            <p><strong>Nhi·ªám v·ª•:</strong> X·ª≠ l√Ω c√°c request t·ª´ ·ª©ng d·ª•ng qu·∫£n tr·ªã.</p>
            <ul>
                <li>Ph√¢n quy·ªÅn admin v√† super admin</li>
                <li>Logging v√† monitoring chi ti·∫øt</li>
                <li>API versioning v√† backward compatibility</li>
                <li>Security policies v√† firewall rules</li>
            </ul>
        </div>

        <div class="doc-section">
            <h2>Backend Microservices (D·ªãch v·ª• Backend)</h2>
            <p>C√°c d·ªãch v·ª• ƒë·ªôc l·∫≠p x·ª≠ l√Ω logic nghi·ªáp v·ª• c·ª• th·ªÉ, c√≥ th·ªÉ ph√°t tri·ªÉn v√† tri·ªÉn khai ri√™ng bi·ªát. <strong>T·ªïng c·ªông: 13 services</strong></p>

            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service</h4>
                    <p>Qu·∫£n l√Ω gi·ªè h√†ng: th√™m/x√≥a s·∫£n ph·∫©m, t√≠nh to√°n gi√°, √°p d·ª•ng khuy·∫øn m√£i, session management</p>
                </div>
                <div class="component-card">
                    <h4>Product Service</h4>
                    <p>Qu·∫£n l√Ω s·∫£n ph·∫©m: CRUD operations, inventory tracking, categories, pricing, search</p>
                </div>
                <div class="component-card">
                    <h4>News Service</h4>
                    <p>Qu·∫£n l√Ω tin t·ª©c: t·∫°o/s·ª≠a/x√≥a b√†i vi·∫øt, ph√¢n lo·∫°i, scheduling, SEO optimization</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Service</h4>
                    <p>T√≠nh to√°n thi·∫øt k·∫ø: complex algorithms, formulas, simulation engine, validation</p>
                </div>
                <div class="component-card">
                    <h4>Football Service</h4>
                    <p>D·ªãch v·ª• b√≥ng ƒë√°: l·ªãch thi ƒë·∫•u, k·∫øt qu·∫£, th·ªëng k√™, team management, betting odds</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Service</h4>
                    <p>Nh·∫≠t k√Ω thi c√¥ng: activity tracking, progress monitoring, reporting, notifications</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service</h4>
                    <p>AI Chatbot: NLP processing, intent recognition, response generation, learning</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service</h4>
                    <p>X·ª≠ l√Ω thanh to√°n: payment gateway integration, transaction processing, refunds</p>
                </div>
                <div class="component-card">
                    <h4>User Service</h4>
                    <p>Qu·∫£n l√Ω ng∆∞·ªùi d√πng: authentication, profile management, permissions, security</p>
                </div>
                <div class="component-card">
                    <h4>Shell Config Service</h4>
                    <p>C·∫•u h√¨nh Shell: dynamic configuration, feature flags, environment settings</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service</h4>
                    <p>D·ªãch v·ª• qu·∫£n tr·ªã: system management, monitoring, analytics, maintenance</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Service</h4>
                    <p>Qu·∫£n l√Ω ƒë·∫°i l√Ω: registration, hierarchy management, commission calculation</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Service</h4>
                    <p>Ch√≠nh s√°ch ƒë·∫°i l√Ω: rules engine, policy management, compliance checking</p>
                </div>
            </div>
        </div>

        <div class="doc-section">
            <h2>Infrastructure (H·∫° t·∫ßng)</h2>
            <p>L·ªõp h·∫° t·∫ßng bao g·ªìm databases, message broker, cache v√† c√°c th√†nh ph·∫ßn h·ªó tr·ª£. <strong>T·ªïng c·ªông: 15 components</strong></p>

            <h3>Core Infrastructure (2 kh·ªëi)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Message Broker</h4>
                    <p>H·ªá th·ªëng message queue: RabbitMQ/Apache Kafka cho async communication gi·ªØa services</p>
                </div>
                <div class="component-card">
                    <h4>Cache</h4>
                    <p>Distributed caching: Redis cluster cho performance optimization v√† session storage</p>
                </div>
            </div>

            <h3>Databases (13 kh·ªëi)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart DB</h4>
                    <p>Database gi·ªè h√†ng: cart items, session data, temporary storage, expiration management</p>
                </div>
                <div class="component-card">
                    <h4>Product DB</h4>
                    <p>Database s·∫£n ph·∫©m: product catalog, inventory, pricing, categories, specifications</p>
                </div>
                <div class="component-card">
                    <h4>News DB</h4>
                    <p>Database tin t·ª©c: articles, categories, tags, publishing schedule, SEO metadata</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation DB</h4>
                    <p>Database t√≠nh to√°n: formulas, templates, calculation history, validation rules</p>
                </div>
                <div class="component-card">
                    <h4>Football DB</h4>
                    <p>Database b√≥ng ƒë√°: teams, matches, results, statistics, betting data</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log DB</h4>
                    <p>Database nh·∫≠t k√Ω: activity logs, project tracking, progress reports, notifications</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot DB</h4>
                    <p>Database chatbot: conversation history, training data, intents, responses</p>
                </div>
                <div class="component-card">
                    <h4>Payment DB</h4>
                    <p>Database thanh to√°n: transactions, payment methods, billing info, refund records</p>
                </div>
                <div class="component-card">
                    <h4>User DB</h4>
                    <p>Database ng∆∞·ªùi d√πng: user profiles, credentials, preferences, authentication data</p>
                </div>
                <div class="component-card">
                    <h4>Shell Config DB</h4>
                    <p>Database c·∫•u h√¨nh: dynamic settings, feature flags, environment configurations</p>
                </div>
                <div class="component-card">
                    <h4>Admin DB</h4>
                    <p>Database qu·∫£n tr·ªã: system settings, admin users, roles, permissions, audit logs</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management DB</h4>
                    <p>Database ƒë·∫°i l√Ω: agent profiles, hierarchy, commission data, performance metrics</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy DB</h4>
                    <p>Database ch√≠nh s√°ch: policy rules, compliance data, terms & conditions</p>
                </div>
            </div>
        </div>

        <div class="doc-section">
            <h2>üöÄ Th·ª© t·ª± Tri·ªÉn khai & Dependencies</h2>
            <p>ƒê·ªÉ tri·ªÉn khai h·ªá th·ªëng microservice hi·ªáu qu·∫£, c·∫ßn tu√¢n theo th·ª© t·ª± dependencies v√† ∆∞u ti√™n.</p>
            
            <h3>üìã Phase 1: Core Infrastructure (∆Øu ti√™n cao nh·∫•t)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>üî• 1. Message Broker</h4>
                    <p><strong>Tri·ªÉn khai ƒë·∫ßu ti√™n:</strong> RabbitMQ/Kafka - N·ªÅn t·∫£ng communication</p>
                    <p><strong>Dependencies:</strong> Kh√¥ng c√≥</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>üî• 2. Cache (Redis)</h4>
                    <p><strong>Tri·ªÉn khai th·ª© 2:</strong> Session storage, caching layer</p>
                    <p><strong>Dependencies:</strong> Kh√¥ng c√≥</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>üî• 3. User DB</h4>
                    <p><strong>Tri·ªÉn khai th·ª© 3:</strong> Authentication foundation</p>
                    <p><strong>Dependencies:</strong> Message Broker, Cache</p>
                </div>
            </div>

            <h3>üìã Phase 2: Core Services (∆Øu ti√™n cao)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>‚ö° 4. User Service</h4>
                    <p><strong>Core service:</strong> Authentication, authorization</p>
                    <p><strong>Dependencies:</strong> User DB, Cache, Message Broker</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>‚ö° 5. API Gateway User</h4>
                    <p><strong>Entry point:</strong> Request routing, auth validation</p>
                    <p><strong>Dependencies:</strong> User Service</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>‚ö° 6. Shell Config Service + DB</h4>
                    <p><strong>Configuration:</strong> Dynamic settings, feature flags</p>
                    <p><strong>Dependencies:</strong> User Service, API Gateway</p>
                </div>
            </div>

            <h3>üìã Phase 3: Business Services (∆Øu ti√™n trung b√¨nh)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #27ae60;">
                    <h4>üü¢ 7-10. Core Business Services</h4>
                    <p><strong>Tri·ªÉn khai song song:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Product Service + Product DB</li>
                        <li>Cart Service + Cart DB</li>
                        <li>Payment Service + Payment DB</li>
                        <li>News Service + News DB</li>
                    </ul>
                    <p><strong>Dependencies:</strong> API Gateway, User Service</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #27ae60;">
                    <h4>üü¢ 11-15. Extended Services</h4>
                    <p><strong>Tri·ªÉn khai song song:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Design Calculation Service + DB</li>
                        <li>Football Service + DB</li>
                        <li>Communication Log Service + DB</li>
                        <li>Chatbot Service + DB</li>
                        <li>Agent Management Service + DB</li>
                    </ul>
                    <p><strong>Dependencies:</strong> Core Business Services</p>
                </div>
            </div>

            <h3>üìã Phase 4: Admin Layer (∆Øu ti√™n th·∫•p)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #9b59b6;">
                    <h4>üîµ 16-17. Admin Infrastructure</h4>
                    <p><strong>Admin foundation:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Admin Service + Admin DB</li>
                        <li>API Gateway Admin</li>
                    </ul>
                    <p><strong>Dependencies:</strong> All Business Services</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #9b59b6;">
                    <h4>üîµ 18. Agent Policy Service + DB</h4>
                    <p><strong>Policy management:</strong> Rules engine, compliance</p>
                    <p><strong>Dependencies:</strong> Agent Management Service</p>
                </div>
            </div>

            <h3>üìã Phase 5: Frontend Layer (Cu·ªëi c√πng)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #3498db;">
                    <h4>üî∑ 19-20. Shell Applications</h4>
                    <p><strong>Frontend shells:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Shell App User</li>
                        <li>Shell App Admin</li>
                    </ul>
                    <p><strong>Dependencies:</strong> API Gateways, All Services</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #3498db;">
                    <h4>üî∑ 21-44. Frontend Components</h4>
                    <p><strong>Micro-frontends:</strong> 12 User FE + 12 Admin FE</p>
                    <p><strong>Dependencies:</strong> Shell Apps, Backend Services</p>
                </div>
            </div>

            <h3>üîÑ Inter-Service Dependencies Map</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 11px; line-height: 1.3;">
Critical Path Dependencies:

Message Broker ‚îÄ‚îÄ‚îê
Cache ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚Üí User Service ‚îÄ‚îÄ‚Üí API Gateway ‚îÄ‚îÄ‚Üí Shell Apps ‚îÄ‚îÄ‚Üí Frontend Components
User DB ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
                                           ‚ñº
                                    Business Services
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ ‚Ä¢ Product       ‚îÇ
                                    ‚îÇ ‚Ä¢ Cart          ‚îÇ‚îÄ‚îÄ‚Üí Admin Services ‚îÄ‚îÄ‚Üí Admin Frontend
                                    ‚îÇ ‚Ä¢ Payment       ‚îÇ
                                    ‚îÇ ‚Ä¢ News          ‚îÇ
                                    ‚îÇ ‚Ä¢ Design Calc   ‚îÇ
                                    ‚îÇ ‚Ä¢ Football      ‚îÇ
                                    ‚îÇ ‚Ä¢ Comm Log      ‚îÇ
                                    ‚îÇ ‚Ä¢ Chatbot       ‚îÇ
                                    ‚îÇ ‚Ä¢ Agent Mgmt    ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Parallel Development Possible:
‚Ä¢ Phase 3 services can be developed simultaneously
‚Ä¢ Frontend components can be built in parallel once APIs are ready
‚Ä¢ Admin layer can be developed after business logic is stable
                </pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>üè¢ ·ª®ng d·ª•ng ƒê·ªôc l·∫≠p (Independent Applications)</h2>
            <p>C√°c kh·ªëi trong h·ªá th·ªëng k·∫øt h·ª£p v·ªõi nhau t·∫°o th√†nh nh·ªØng <strong>·ª©ng d·ª•ng ho√†n ch·ªânh c√≥ th·ªÉ ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p</strong>. M·ªói ·ª©ng d·ª•ng bao g·ªìm Frontend, Backend v√† Database ri√™ng bi·ªát, ƒë·∫£m b·∫£o t√≠nh t·ª± ch·ªß v√† kh√¥ng ph·ª• thu·ªôc v√†o c√°c ·ª©ng d·ª•ng kh√°c.</p>
            
            <h3>üì± 12 ·ª®ng d·ª•ng Nghi·ªáp v·ª• ƒê·ªôc l·∫≠p:</h3>
            
            <div class="component-grid">
                <div class="component-card" style="border: 2px solid #e74c3c;">
                    <h4>üõí 1. ·ª®ng d·ª•ng Gi·ªè h√†ng (Cart Application)</h4>
                    <p><strong>Frontend:</strong> Cart Service Frontend + Cart Service Admin</p>
                    <p><strong>Backend:</strong> Cart Service</p>
                    <p><strong>Database:</strong> Cart DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Qu·∫£n l√Ω gi·ªè h√†ng, th√™m/x√≥a s·∫£n ph·∫©m, t√≠nh to√°n t·ªïng ti·ªÅn</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #f39c12;">
                    <h4>üì¶ 2. ·ª®ng d·ª•ng S·∫£n ph·∫©m (Product Application)</h4>
                    <p><strong>Frontend:</strong> Product Service Frontend + Product Service Admin</p>
                    <p><strong>Backend:</strong> Product Service</p>
                    <p><strong>Database:</strong> Product DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Qu·∫£n l√Ω catalog, inventory, pricing, categories</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #27ae60;">
                    <h4>üì∞ 3. ·ª®ng d·ª•ng Tin t·ª©c (News Application)</h4>
                    <p><strong>Frontend:</strong> News Service Frontend + News Service Admin</p>
                    <p><strong>Backend:</strong> News Service</p>
                    <p><strong>Database:</strong> News DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Qu·∫£n l√Ω tin t·ª©c, b√†i vi·∫øt, ph√¢n lo·∫°i, publishing</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #3498db;">
                    <h4>üìê 4. ·ª®ng d·ª•ng T√≠nh to√°n Thi·∫øt k·∫ø (Design Calculation Application)</h4>
                    <p><strong>Frontend:</strong> Design Calculation Frontend + Design Calculation Admin</p>
                    <p><strong>Backend:</strong> Design Calculation Service</p>
                    <p><strong>Database:</strong> Design Calculation DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Algorithms, formulas, simulation engine, validation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #9b59b6;">
                    <h4>‚öΩ 5. ·ª®ng d·ª•ng B√≥ng ƒë√° (Football Application)</h4>
                    <p><strong>Frontend:</strong> Football Service Frontend + Football Service Admin</p>
                    <p><strong>Backend:</strong> Football Service</p>
                    <p><strong>Database:</strong> Football DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> L·ªãch thi ƒë·∫•u, k·∫øt qu·∫£, th·ªëng k√™, team management</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #e67e22;">
                    <h4>üìã 6. ·ª®ng d·ª•ng Nh·∫≠t k√Ω thi c√¥ng (Communication Log Application)</h4>
                    <p><strong>Frontend:</strong> Communication Log Frontend + Communication Log Admin</p>
                    <p><strong>Backend:</strong> Communication Log Service</p>
                    <p><strong>Database:</strong> Communication Log DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Activity tracking, progress monitoring, reporting</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #1abc9c;">
                    <h4>ü§ñ 7. ·ª®ng d·ª•ng Chatbot (Chatbot Application)</h4>
                    <p><strong>Frontend:</strong> Chatbot Service Frontend + Chatbot Service Admin</p>
                    <p><strong>Backend:</strong> Chatbot Service</p>
                    <p><strong>Database:</strong> Chatbot DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> NLP processing, intent recognition, response generation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #e74c3c;">
                    <h4>üí≥ 8. ·ª®ng d·ª•ng Thanh to√°n (Payment Application)</h4>
                    <p><strong>Frontend:</strong> Payment Service Frontend + Payment Service Admin</p>
                    <p><strong>Backend:</strong> Payment Service</p>
                    <p><strong>Database:</strong> Payment DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Payment gateway integration, transaction processing</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #34495e;">
                    <h4>üë§ 9. ·ª®ng d·ª•ng Ng∆∞·ªùi d√πng (User Application)</h4>
                    <p><strong>Frontend:</strong> User Service Frontend + User Service Admin</p>
                    <p><strong>Backend:</strong> User Service</p>
                    <p><strong>Database:</strong> User DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Authentication, profile management, permissions</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #95a5a6;">
                    <h4>‚öôÔ∏è 10. ·ª®ng d·ª•ng Qu·∫£n tr·ªã (Admin Application)</h4>
                    <p><strong>Frontend:</strong> Admin Service Frontend + Admin Service Admin</p>
                    <p><strong>Backend:</strong> Admin Service</p>
                    <p><strong>Database:</strong> Admin DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> System management, monitoring, analytics</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #f1c40f;">
                    <h4>ü§ù 11. ·ª®ng d·ª•ng Qu·∫£n l√Ω ƒê·∫°i l√Ω (Agent Management Application)</h4>
                    <p><strong>Frontend:</strong> Agent Management Frontend + Agent Management Admin</p>
                    <p><strong>Backend:</strong> Agent Management Service</p>
                    <p><strong>Database:</strong> Agent Management DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Registration, hierarchy, commission calculation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #8e44ad;">
                    <h4>üìú 12. ·ª®ng d·ª•ng Ch√≠nh s√°ch ƒê·∫°i l√Ω (Agent Policy Application)</h4>
                    <p><strong>Frontend:</strong> Agent Policy Frontend + Agent Policy Admin</p>
                    <p><strong>Backend:</strong> Agent Policy Service</p>
                    <p><strong>Database:</strong> Agent Policy DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Rules engine, policy management, compliance</p>
                </div>
            </div>

            <h3>üîß ·ª®ng d·ª•ng H·ªó tr·ª£:</h3>
            <div class="component-grid">
                <div class="component-card" style="border: 2px solid #16a085;">
                    <h4>‚öôÔ∏è Shell Configuration Application</h4>
                    <p><strong>Backend:</strong> Shell Config Service</p>
                    <p><strong>Database:</strong> Shell Config DB</p>
                    <p><strong>Ch·ª©c nƒÉng:</strong> Qu·∫£n l√Ω c·∫•u h√¨nh cho Shell Apps (Shell App User, Shell App Admin)</p>
                    <p><strong>L∆∞u √Ω:</strong> ·ª®ng d·ª•ng ƒë·ªôc l·∫≠p qu·∫£n l√Ω c·∫•u h√¨nh ƒë·ªông</p>
                </div>
            </div>

            <h3>üèóÔ∏è Th√†nh ph·∫ßn D√πng chung (Shared Infrastructure):</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="color: #00bcd4; font-weight: bold;">C√°c th√†nh ph·∫ßn sau kh√¥ng t·∫°o th√†nh "·ª©ng d·ª•ng ho√†n ch·ªânh" nh∆∞ng h·ªó tr·ª£ cho t·∫•t c·∫£ ·ª©ng d·ª•ng ƒë·ªôc l·∫≠p:</p>
                <ul style="color: #d0d0d0; margin: 10px 0;">
                    <li><strong>API Gateway (User/Admin):</strong> Entry point, routing, authentication</li>
                    <li><strong>Message Broker:</strong> Inter-service communication</li>
                    <li><strong>Cache (Redis):</strong> Performance optimization, session storage</li>
                    <li><strong>Shell App User/Admin:</strong> Frontend orchestration shells</li>
                </ul>
            </div>

            <h3>üîÑ Ki·∫øn tr√∫c ·ª®ng d·ª•ng ƒê·ªôc l·∫≠p:</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 11px; line-height: 1.3;">
M·ªói ·ª©ng d·ª•ng ƒë·ªôc l·∫≠p c√≥ ki·∫øn tr√∫c 3-tier:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FRONTEND LAYER                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   User Frontend     ‚îÇ  ‚îÇ   Admin Frontend        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   (End Users)       ‚îÇ  ‚îÇ   (Administrators)      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 SHARED INFRASTRUCTURE                   ‚îÇ
‚îÇ           API Gateway ‚Üí Authentication ‚Üí Routing        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    BACKEND LAYER                        ‚îÇ
‚îÇ              Microservice (Business Logic)              ‚îÇ
‚îÇ         ‚Ä¢ REST APIs  ‚Ä¢ Business Rules  ‚Ä¢ Validation    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DATABASE LAYER                       ‚îÇ
‚îÇ                 Dedicated Database                      ‚îÇ
‚îÇ            ‚Ä¢ Data Storage  ‚Ä¢ Persistence  ‚Ä¢ Backup     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

L·ª£i √≠ch c·ªßa ki·∫øn tr√∫c n√†y:
‚úÖ ƒê·ªôc l·∫≠p ho√†n to√†n - c√≥ th·ªÉ deploy/scale ri√™ng bi·ªát
‚úÖ Team autonomy - m·ªói team ph·ª• trÏ±Ö m·ªôt ·ª©ng d·ª•ng
‚úÖ Technology diversity - m·ªói ·ª©ng d·ª•ng c√≥ th·ªÉ d√πng tech stack kh√°c
‚úÖ Fault isolation - l·ªói m·ªôt ·ª©ng d·ª•ng kh√¥ng ·∫£nh h∆∞·ªüng ·ª©ng d·ª•ng kh√°c
                </pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>üìä T·ªïng k·∫øt Ki·∫øn tr√∫c</h2>
            <p><strong>T·ªïng c·ªông: 56 th√†nh ph·∫ßn t·∫°o th√†nh 13 ·ª©ng d·ª•ng ƒë·ªôc l·∫≠p</strong></p>
            <ul>
                <li><strong>·ª®ng d·ª•ng Nghi·ªáp v·ª• ƒê·ªôc l·∫≠p:</strong> 12 ·ª©ng d·ª•ng (36 kh·ªëi)</li>
                <li><strong>·ª®ng d·ª•ng H·ªó tr·ª£:</strong> 1 ·ª©ng d·ª•ng Shell Config (2 kh·ªëi)</li>
                <li><strong>Shared Infrastructure:</strong> 18 kh·ªëi (API Gateway, Message Broker, Cache, Shell Apps)</li>
            </ul>
            <p>Ki·∫øn tr√∫c n√†y ƒë·∫£m b·∫£o t√≠nh <strong>scalability</strong>, <strong>maintainability</strong> v√† <strong>independence</strong> c·ªßa t·ª´ng ·ª©ng d·ª•ng, cho ph√©p ph√°t tri·ªÉn v√† tri·ªÉn khai ho√†n to√†n ƒë·ªôc l·∫≠p.</p>
        </div>
        </div>
    </div>

    <div class="container" id="diagramContainer">
        <h1>S∆° ƒë·ªì Ki·∫øn tr√∫c Microservice</h1>
        
        <!-- Toolbar c√¥ng c·ª• -->
        <div class="toolbar">
            <button class="tool-btn" data-tooltip="Ph√≥ng to" onclick="zoomIn()">üîç+</button>
            <button class="tool-btn" data-tooltip="Thu nh·ªè" onclick="zoomOut()">üîç-</button>
            <button class="tool-btn reset" data-tooltip="ƒê·∫∑t l·∫°i" onclick="resetView()">üè†</button>
            <button class="tool-btn" data-tooltip="Fit m√†n h√¨nh" onclick="fitToScreen()">üìê</button>
        </div>
        
        <!-- Zoom indicator -->
        <div class="zoom-indicator" id="zoomIndicator">100%</div>
        
        <!-- Container cho diagram -->
        <div class="diagram-container" id="diagramContainer">
            <div class="mermaid" id="mermaidDiagram">
graph TB
    subgraph "Frontend Applications"
        direction TB
        ShellAppUser[Shell App User]
        ShellAppAdmin[Shell App Admin]
        
        subgraph "User Frontend Components"
            direction TB
            CartFE[Cart Service Frontend<br>Giao di·ªán Gi·ªè h√†ng]:::frontend
            ProductFE[Product Service Frontend<br>Giao di·ªán S·∫£n ph·∫©m]:::frontend
            NewsFE[News Service Frontend<br>Giao di·ªán Tin t·ª©c]:::frontend
            DesignCalculationFE[Design Calculation Frontend<br>Giao di·ªán T√≠nh to√°n Thi·∫øt k·∫ø]:::frontend
            FootballFE[Football Service Frontend<br>Giao di·ªán B√≥ng ƒë√°]:::frontend
            CommunicationLogFE[Communication Log Frontend<br>Giao di·ªán Nh·∫≠t k√Ω thi c√¥ng]:::frontend
            ChatbotFE[Chatbot Service Frontend<br>Giao di·ªán Chatbot]:::frontend
            PaymentFE[Payment Service Frontend<br>Giao di·ªán Thanh to√°n]:::frontend
            UserFE[User Service Frontend<br>Giao di·ªán Ng∆∞·ªùi d√πng]:::frontend
            AdminFE[Admin Service Frontend<br>Giao di·ªán Qu·∫£n tr·ªã]:::frontend
            AgentManagementFE[Agent Management Frontend<br>Giao di·ªán Qu·∫£n l√Ω ƒê·∫°i l√Ω]:::frontend
            AgentPolicyFE[Agent Policy Frontend<br>Giao di·ªán Ch√≠nh s√°ch ƒê·∫°i l√Ω]:::frontend
        end
        
        subgraph "Admin Frontend Components"
            direction TB
            CartAdminFE[Cart Service Admin<br>Qu·∫£n tr·ªã Gi·ªè h√†ng]:::adminfe
            ProductAdminFE[Product Service Admin<br>Qu·∫£n tr·ªã S·∫£n ph·∫©m]:::adminfe
            NewsAdminFE[News Service Admin<br>Qu·∫£n tr·ªã Tin t·ª©c]:::adminfe
            DesignCalculationAdminFE[Design Calculation Admin<br>Qu·∫£n tr·ªã T√≠nh to√°n Thi·∫øt k·∫ø]:::adminfe
            FootballAdminFE[Football Service Admin<br>Qu·∫£n tr·ªã B√≥ng ƒë√°]:::adminfe
            CommunicationLogAdminFE[Communication Log Admin<br>Qu·∫£n tr·ªã Nh·∫≠t k√Ω thi c√¥ng]:::adminfe
            ChatbotAdminFE[Chatbot Service Admin<br>Qu·∫£n tr·ªã Chatbot]:::adminfe
            PaymentAdminFE[Payment Service Admin<br>Qu·∫£n tr·ªã Thanh to√°n]:::adminfe
            UserAdminFE[User Service Admin<br>Qu·∫£n tr·ªã Ng∆∞·ªùi d√πng]:::adminfe
            AdminAdminFE[Admin Service Admin<br>Qu·∫£n tr·ªã H·ªá th·ªëng]:::adminfe
            AgentManagementAdminFE[Agent Management Admin<br>Qu·∫£n tr·ªã ƒê·∫°i l√Ω]:::adminfe
            AgentPolicyAdminFE[Agent Policy Admin<br>Qu·∫£n tr·ªã Ch√≠nh s√°ch ƒê·∫°i l√Ω]:::adminfe
        end
    end

    %% T·∫°o kho·∫£ng c√°ch ƒë·ªÉ ƒë·∫©y h√†ng tr√™n l√™n cao
    SPACER1[ ]:::invisible
    SPACER2[ ]:::invisible
    SPACER3[ ]:::invisible
    SPACER4[ ]:::invisible
    SPACER5[ ]:::invisible
    SPACER6[ ]:::invisible
    SPACER7[ ]:::invisible
    SPACER8[ ]:::invisible

    subgraph "API Gateway (C·ªïng API)"
        direction TB
        APIGatewayUser[API Gateway User]
        APIGatewayAdmin[API Gateway Admin]
    end

    subgraph "Backend Microservices (C√°c d·ªãch v·ª• ƒë·ªôc l·∫≠p)"
            CartService(Cart Service<br>D·ªãch v·ª• Gi·ªè h√†ng):::group1
        ProductService(Product Service<br>D·ªãch v·ª• S·∫£n ph·∫©m):::group1
        NewsService(News Service<br>D·ªãch v·ª• Tin t·ª©c):::group1
        
            DesignCalculationService(Design Calculation Service<br>D·ªãch v·ª• T√≠nh to√°n Thi·∫øt k·∫ø):::group2
        FootballService(Football Service<br>D·ªãch v·ª• B√≥ng ƒë√°):::group2
        CommunicationLogService(Communication Log Service<br>D·ªãch v·ª• Nh·∫≠t k√Ω thi c√¥ng):::group2
        ChatbotService(Chatbot Service<br>D·ªãch v·ª• Chatbot):::group2
        
            PaymentService(Payment Service<br>D·ªãch v·ª• Thanh to√°n):::group3
        UserService(User Service<br>D·ªãch v·ª• Ng∆∞·ªùi d√πng):::group3
        ShellConfigService(Shell Config Service<br>D·ªãch v·ª• C·∫•u h√¨nh Shell):::group3
        AdminService(Admin Service<br>D·ªãch v·ª• Qu·∫£n tr·ªã):::group3
        
            AgentManagementService(Agent Management Service<br>D·ªãch v·ª• Qu·∫£n l√Ω ƒê·∫°i l√Ω):::group4
        AgentPolicyService(Agent Policy Service<br>D·ªãch v·ª• Ch√≠nh s√°ch ƒê·∫°i l√Ω):::group4
    end

    subgraph "Infrastructure (H·∫° t·∫ßng)"
        direction TB
        MessageBroker(Message Broker)
        Cache(Cache)
        
        subgraph "Databases"
            direction TB
            CartDB[Cart DB]:::newdb
            ProductDB[Product DB]:::newdb
            NewsDB[News DB]:::newdb
            DesignCalculationDB[Design Calculation DB]
            FootballDB[Football DB]:::newdb
            CommunicationLogDB[Communication Log DB]:::newdb
            ChatbotDB[Chatbot DB]
            PaymentDB[Payment DB]
            UserDB[User DB]
            ShellConfigDB[Shell Config DB]:::newdb
            AdminDB[Admin DB]
            AgentManagementDB[Agent Management DB]
            AgentPolicyDB[Agent Policy DB]
        end
    end

    ShellAppUser --> APIGatewayUser
    ShellAppAdmin --> APIGatewayAdmin
    
    %% Shell App User loads c√°c frontend components
    ShellAppUser --> CartFE
    ShellAppUser --> ProductFE
    ShellAppUser --> NewsFE
    ShellAppUser --> DesignCalculationFE
    ShellAppUser --> FootballFE
    ShellAppUser --> CommunicationLogFE
    ShellAppUser --> ChatbotFE
    ShellAppUser --> PaymentFE
    ShellAppUser --> UserFE
    ShellAppUser --> AdminFE
    ShellAppUser --> AgentManagementFE
    ShellAppUser --> AgentPolicyFE

    %% Shell App Admin loads c√°c admin frontend components
    ShellAppAdmin --> CartAdminFE
    ShellAppAdmin --> ProductAdminFE
    ShellAppAdmin --> NewsAdminFE
    ShellAppAdmin --> DesignCalculationAdminFE
    ShellAppAdmin --> FootballAdminFE
    ShellAppAdmin --> CommunicationLogAdminFE
    ShellAppAdmin --> ChatbotAdminFE
    ShellAppAdmin --> PaymentAdminFE
    ShellAppAdmin --> UserAdminFE
    ShellAppAdmin --> AdminAdminFE
    ShellAppAdmin --> AgentManagementAdminFE
    ShellAppAdmin --> AgentPolicyAdminFE

    %% Frontend components k·∫øt n·ªëi v·ªõi backend services th√¥ng qua API Gateway
    CartFE --> APIGatewayUser
    ProductFE --> APIGatewayUser
    NewsFE --> APIGatewayUser
    DesignCalculationFE --> APIGatewayUser
    FootballFE --> APIGatewayUser
    CommunicationLogFE --> APIGatewayUser
    ChatbotFE --> APIGatewayUser
    PaymentFE --> APIGatewayUser
    UserFE --> APIGatewayUser
    AdminFE --> APIGatewayUser
    AgentManagementFE --> APIGatewayUser
    AgentPolicyFE --> APIGatewayUser

    %% Admin Frontend components k·∫øt n·ªëi v·ªõi backend services th√¥ng qua API Gateway Admin
    CartAdminFE --> APIGatewayAdmin
    ProductAdminFE --> APIGatewayAdmin
    NewsAdminFE --> APIGatewayAdmin
    DesignCalculationAdminFE --> APIGatewayAdmin
    FootballAdminFE --> APIGatewayAdmin
    CommunicationLogAdminFE --> APIGatewayAdmin
    ChatbotAdminFE --> APIGatewayAdmin
    PaymentAdminFE --> APIGatewayAdmin
    UserAdminFE --> APIGatewayAdmin
    AdminAdminFE --> APIGatewayAdmin
    AgentManagementAdminFE --> APIGatewayAdmin
    AgentPolicyAdminFE --> APIGatewayAdmin

    APIGatewayUser --> CartService
    APIGatewayUser --> ProductService
    APIGatewayUser --> NewsService
    APIGatewayUser --> FootballService
    APIGatewayUser --> ChatbotService
    APIGatewayUser --> PaymentService
    APIGatewayUser --> UserService
    
    APIGatewayAdmin --> CartService
    APIGatewayAdmin --> ProductService
    APIGatewayAdmin --> NewsService
    APIGatewayAdmin --> DesignCalculationService
    APIGatewayAdmin --> FootballService
    APIGatewayAdmin --> CommunicationLogService
    APIGatewayAdmin --> ChatbotService
    APIGatewayAdmin --> PaymentService
    APIGatewayAdmin --> UserService
    APIGatewayAdmin --> ShellConfigService
    APIGatewayAdmin --> AdminService
    APIGatewayAdmin --> AgentManagementService
    APIGatewayAdmin --> AgentPolicyService

    AdminService --> UserService
    AdminService --> PaymentService
    AdminService --> AgentPolicyService
    AdminService --> AgentManagementService
    AdminService --> ProductService
    AdminService --> CartService
    AdminService --> NewsService
    AgentPolicyService --> PaymentService
    CartService --> ProductService
    CartService --> UserService
    CartService --> PaymentService
    FootballService --> UserService
    CommunicationLogService --> AdminService
    ShellConfigService --> AdminService

    PaymentService --> MessageBroker
    UserService --> MessageBroker
    AgentPolicyService --> Cache
    CartService --> MessageBroker
    ProductService --> Cache
    NewsService --> Cache
    FootballService --> Cache
    ShellConfigService --> Cache

    CartService --> CartDB
    ProductService --> ProductDB
    NewsService --> NewsDB
    DesignCalculationService --> DesignCalculationDB
    FootballService --> FootballDB
    CommunicationLogService --> CommunicationLogDB
    ChatbotService --> ChatbotDB
    PaymentService --> PaymentDB
    UserService --> UserDB
    ShellConfigService --> ShellConfigDB
    AdminService --> AdminDB
    AgentManagementService --> AgentManagementDB
    AgentPolicyService --> AgentPolicyDB

    classDef group1 fill:#E6F3FF,stroke:#333,stroke-width:2px
    classDef group2 fill:#F0FFF0,stroke:#333,stroke-width:2px
    classDef group3 fill:#FFF0F5,stroke:#333,stroke-width:2px
    classDef group4 fill:#F5F5DC,stroke:#333,stroke-width:2px
    classDef newdb fill:#FFE4B5,stroke:#333,stroke-width:2px
    classDef frontend fill:#E6E6FA,stroke:#4B0082,stroke-width:2px
    classDef adminfe fill:#FFE4E1,stroke:#DC143C,stroke-width:2px
    
    %% ƒê·ªãnh nghƒ©a m√†u n·ªÅn cho subgraph
    classDef subgraph1 fill:#E3F2FD,stroke:#333,stroke-width:2px
    classDef subgraph2 fill:#E8F5E8,stroke:#333,stroke-width:2px  
    classDef subgraph3 fill:#F3E5F5,stroke:#333,stroke-width:2px
    classDef subgraph4 fill:#FFF3E0,stroke:#333,stroke-width:2px
    
    %% ·∫®n c√°c spacer nodes
    classDef invisible fill:transparent,stroke:transparent,color:transparent
            </div>
        </div>
        


    </div>

    <script>
        // Bi·∫øn to√†n c·ª•c cho zoom v√† pan
        let currentZoom = 1;
        let currentX = 0;
        let currentY = 0;
        let isDragging = false;
        let lastMouseX = 0;
        let lastMouseY = 0;
        
        // Kh·ªüi t·∫°o Mermaid v·ªõi custom theme
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                clusterBkg: '#E3F2FD',
                clusterBorder: '#333'
            },
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true
            }
        });
        
        // H√†m c·∫≠p nh·∫≠t transform
        function updateTransform() {
            const mermaidElement = document.getElementById('mermaidDiagram');
            mermaidElement.style.transform = `translate(${currentX}px, ${currentY}px) scale(${currentZoom})`;
            document.getElementById('zoomIndicator').textContent = Math.round(currentZoom * 100) + '%';
        }
        
        // H√†m zoom in
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            updateTransform();
        }
        
        // H√†m zoom out
        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.1);
            updateTransform();
        }
        
        // H√†m reset view
        function resetView() {
            currentZoom = 1;
            currentX = 0;
            currentY = 0;
            updateTransform();
        }
        
        // H√†m fit to screen
        function fitToScreen() {
            const container = document.getElementById('diagramContainer');
            const mermaidElement = document.getElementById('mermaidDiagram');
            const svg = mermaidElement.querySelector('svg');
            
            if (svg) {
                const containerRect = container.getBoundingClientRect();
                const svgRect = svg.getBoundingClientRect();
                
                const scaleX = containerRect.width / svgRect.width;
                const scaleY = containerRect.height / svgRect.height;
                currentZoom = Math.min(scaleX, scaleY) * 0.9;
                
                currentX = (containerRect.width - svgRect.width * currentZoom) / 2;
                currentY = (containerRect.height - svgRect.height * currentZoom) / 2;
                
                updateTransform();
            }
        }
        
        // X·ª≠ l√Ω s·ª± ki·ªán chu·ªôt cho pan
        document.getElementById('diagramContainer').addEventListener('mousedown', function(e) {
            if (e.button === 0) { // Left mouse button
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                this.classList.add('panning');
                e.preventDefault();
            }
        });
        
        document.addEventListener('mousemove', function(e) {
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                
                currentX += deltaX;
                currentY += deltaY;
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                
                updateTransform();
            }
        });
        
        document.addEventListener('mouseup', function(e) {
            if (isDragging) {
                isDragging = false;
                document.getElementById('diagramContainer').classList.remove('panning');
            }
        });
        
        // X·ª≠ l√Ω zoom b·∫±ng scroll wheel
        document.getElementById('diagramContainer').addEventListener('wheel', function(e) {
            e.preventDefault();
            
            const rect = this.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            const oldZoom = currentZoom;
            
            if (e.deltaY < 0) {
                currentZoom = Math.min(currentZoom * 1.1, 3);
            } else {
                currentZoom = Math.max(currentZoom / 1.1, 0.1);
            }
            
            // Zoom v·ªÅ ph√≠a con tr·ªè chu·ªôt
            const zoomRatio = currentZoom / oldZoom;
            currentX = mouseX - (mouseX - currentX) * zoomRatio;
            currentY = mouseY - (mouseY - currentY) * zoomRatio;
            
            updateTransform();
        });
        
        // X·ª≠ l√Ω ph√≠m t·∫Øt
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case '+':
                case '=':
                    zoomIn();
                    e.preventDefault();
                    break;
                case '-':
                    zoomOut();
                    e.preventDefault();
                    break;
                case '0':
                    resetView();
                    e.preventDefault();
                    break;
                case 'f':
                case 'F':
                    fitToScreen();
                    e.preventDefault();
                    break;
            }
        });
        
        // H√†m thay ƒë·ªïi m√†u n·ªÅn subgraph
        function changeSubgraphColors() {
            const svg = document.querySelector('#mermaidDiagram svg');
            if (!svg) return;
            
            // T√¨m t·∫•t c·∫£ c√°c cluster (subgraph backgrounds) - th·ª≠ nhi·ªÅu c√°ch
            let clusters = svg.querySelectorAll('.cluster rect');
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('g.cluster rect');
            }
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('rect[fill="#FFFFDE"]');
            }
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('rect');
            }
            
            console.log('Found', clusters.length, 'cluster elements');
            
            // ƒê·ªãnh nghƒ©a 4 m√†u nh·∫°t kh√°c nhau
            const colors = [
                '#E3F2FD', // Xanh lam nh·∫°t - Frontend Applications
                '#E8F5E8', // Xanh l√° nh·∫°t - API Gateway  
                '#F3E5F5', // T√≠m nh·∫°t - Backend Microservices
                '#FFF3E0'  // Cam nh·∫°t - Infrastructure
            ];
            
            // L·ªçc ch·ªâ l·∫•y c√°c rect l·ªõn (subgraph backgrounds)
            const largeClusters = Array.from(clusters).filter(rect => {
                const width = parseFloat(rect.getAttribute('width') || 0);
                const height = parseFloat(rect.getAttribute('height') || 0);
                return width > 200 && height > 100; // Ch·ªâ l·∫•y c√°c rect l·ªõn
            });
            
            console.log('Found', largeClusters.length, 'large cluster backgrounds');
            
            // √Åp d·ª•ng m√†u cho t·ª´ng cluster l·ªõn
            largeClusters.forEach((rect, index) => {
                if (index < colors.length) {
                    rect.setAttribute('fill', colors[index]);
                    rect.setAttribute('opacity', '0.4');
                    console.log(`Applied color ${colors[index]} to cluster ${index}`);
                }
            });
        }
        
        // Render Mermaid
        mermaid.run().then(() => {
            console.log('Mermaid diagram rendered successfully');
            
            // Thay ƒë·ªïi m√†u n·ªÅn sau khi render - th·ª≠ nhi·ªÅu l·∫ßn
            setTimeout(() => {
                changeSubgraphColors();
                fitToScreen();
            }, 500);
            
            setTimeout(() => {
                changeSubgraphColors();
            }, 1000);
            
            setTimeout(() => {
                changeSubgraphColors();
            }, 2000);
        }).catch(err => {
            console.error('Mermaid rendering error:', err);
            document.getElementById('mermaidDiagram').innerHTML = '<p style="color: red; text-align: center; margin-top: 50px;">Error rendering diagram. Please refresh the page.</p>';
        });
        
        // NgƒÉn context menu khi right click
        document.getElementById('diagramContainer').addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        // Documentation zoom and pan variables
        let docScale = 1;
        let docTranslateX = 0;
        let docTranslateY = 0;
        let isDocDragging = false;
        let lastDocMouseX = 0;
        let lastDocMouseY = 0;

        // H√†m chuy·ªÉn ƒë·ªïi gi·ªØa s∆° ƒë·ªì v√† t√†i li·ªáu
        function showDocumentation() {
            document.getElementById('diagramContainer').style.display = 'none';
            document.getElementById('docContainer').style.display = 'block';
            initDocumentationControls();
        }
        
        function showDiagram() {
            document.getElementById('docContainer').style.display = 'none';
            document.getElementById('diagramContainer').style.display = 'block';
        }

        function initDocumentationControls() {
            const docPage = document.getElementById('documentationPage');
            const docContainer = document.getElementById('docContainer');
            
            // Mouse wheel zoom for documentation
            docContainer.addEventListener('wheel', function(e) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.1 : 0.1;
                docScale = Math.max(0.5, Math.min(3, docScale + delta));
                updateDocTransform();
            });

            // Mouse drag pan for documentation
            docPage.addEventListener('mousedown', function(e) {
                if (e.button === 0) { // Left mouse button
                    isDocDragging = true;
                    lastDocMouseX = e.clientX;
                    lastDocMouseY = e.clientY;
                    docPage.style.cursor = 'grabbing';
                    e.preventDefault();
                }
            });

            document.addEventListener('mousemove', function(e) {
                if (isDocDragging) {
                    const deltaX = e.clientX - lastDocMouseX;
                    const deltaY = e.clientY - lastDocMouseY;
                    docTranslateX += deltaX;
                    docTranslateY += deltaY;
                    lastDocMouseX = e.clientX;
                    lastDocMouseY = e.clientY;
                    updateDocTransform();
                }
            });

            document.addEventListener('mouseup', function() {
                if (isDocDragging) {
                    isDocDragging = false;
                    docPage.style.cursor = 'grab';
                }
            });

            // Touch support for mobile
            docPage.addEventListener('touchstart', function(e) {
                if (e.touches.length === 1) {
                    isDocDragging = true;
                    lastDocMouseX = e.touches[0].clientX;
                    lastDocMouseY = e.touches[0].clientY;
                    e.preventDefault();
                }
            });

            docPage.addEventListener('touchmove', function(e) {
                if (isDocDragging && e.touches.length === 1) {
                    e.preventDefault();
                    const deltaX = e.touches[0].clientX - lastDocMouseX;
                    const deltaY = e.touches[0].clientY - lastDocMouseY;
                    docTranslateX += deltaX;
                    docTranslateY += deltaY;
                    lastDocMouseX = e.touches[0].clientX;
                    lastDocMouseY = e.touches[0].clientY;
                    updateDocTransform();
                }
            });

            docPage.addEventListener('touchend', function() {
                isDocDragging = false;
            });

            // Keyboard shortcuts for documentation
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('docContainer').style.display === 'block') {
                    switch(e.key) {
                        case '+':
                        case '=':
                            docZoomIn();
                            e.preventDefault();
                            break;
                        case '-':
                            docZoomOut();
                            e.preventDefault();
                            break;
                        case '0':
                            resetDocZoom();
                            e.preventDefault();
                            break;
                    }
                }
            });
        }

        function updateDocTransform() {
            const docPage = document.getElementById('documentationPage');
            docPage.style.transform = `translate(${docTranslateX}px, ${docTranslateY}px) scale(${docScale})`;
        }

        function docZoomIn() {
            docScale = Math.min(3, docScale + 0.2);
            updateDocTransform();
        }

        function docZoomOut() {
            docScale = Math.max(0.5, docScale - 0.2);
            updateDocTransform();
        }

        function resetDocZoom() {
            docScale = 1;
            docTranslateX = 0;
            docTranslateY = 0;
            updateDocTransform();
        }

        // Alias functions for button clicks
        function zoomIn() {
            if (document.getElementById('docContainer').style.display === 'block') {
                docZoomIn();
            } else {
                // Original diagram zoom in
                currentZoom = Math.min(currentZoom * 1.2, 3);
                updateTransform();
            }
        }

        function zoomOut() {
            if (document.getElementById('docContainer').style.display === 'block') {
                docZoomOut();
            } else {
                // Original diagram zoom out
                currentZoom = Math.max(currentZoom / 1.2, 0.1);
                updateTransform();
            }
        }

        function resetZoom() {
            if (document.getElementById('docContainer').style.display === 'block') {
                resetDocZoom();
            } else {
                // Original diagram reset
                resetView();
            }
        }
    </script>
</body>
</html>
