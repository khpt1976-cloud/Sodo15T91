<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÆ¡ Ä‘á»“ Kiáº¿n trÃºc Microservice</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a2332 0%, #2c3e50 100%);
            min-height: 100vh;
            overflow: hidden;
        }
        .container {
            background: rgba(26, 35, 50, 0.9);
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        h1 {
            text-align: center;
            color: white;
            margin: 0;
            padding: 15px 0;
            background: rgba(26, 35, 50, 0.95);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1000;
        }
        
        /* Toolbar cÃ´ng cá»¥ */
        .toolbar {
            position: fixed;
            top: 70px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding: 10px;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .tool-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 8px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tool-btn:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        
        .tool-btn:active {
            transform: scale(0.95);
        }
        
        .tool-btn.reset {
            background: #28a745;
        }
        
        .tool-btn.reset:hover {
            background: #1e7e34;
        }
        
        /* Tooltip */
        .tool-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 55px;
            top: 50%;
            transform: translateY(-50%);
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .tool-btn:hover::after {
            opacity: 1;
        }
        
        /* Container cho diagram cÃ³ thá»ƒ zoom vÃ  pan */
        .diagram-container {
            position: absolute;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            cursor: grab;
        }
        
        .diagram-container.panning {
            cursor: grabbing;
        }
        
        .mermaid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            transition: transform 0.3s ease;
        }
        
        /* CSS Ä‘á»ƒ cÄƒn giá»¯a Frontend Applications vÃ  API Gateway */
        .mermaid svg {
            overflow: visible;
            width: 100%;
            height: auto;
            min-height: 100%;
        }
        
        /* Zoom level indicator */
        .zoom-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1001;
        }

        /* TÃ¹y chá»‰nh mÃ u ná»n cho cÃ¡c subgraph chÃ­nh */
        .mermaid .cluster rect {
            opacity: 0.4 !important;
        }
        
        /* Force mÃ u cho cÃ¡c subgraph báº±ng CSS */
        .mermaid svg g.cluster:nth-child(1) rect {
            fill: #E3F2FD !important;
        }
        .mermaid svg g.cluster:nth-child(2) rect {
            fill: #E8F5E8 !important;
        }
        .mermaid svg g.cluster:nth-child(3) rect {
            fill: #F3E5F5 !important;
        }
        .mermaid svg g.cluster:nth-child(4) rect {
            fill: #FFF3E0 !important;
        }
        
        /* áº¨n hoÃ n toÃ n cÃ¡c spacer nodes */
        .mermaid g[id*="SPACER"] {
            display: none !important;
        }
        
        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #1a2332;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-decoration: none;
            flex: 1;
        }
        
        .navbar-brand .logo {
            width: 32px;
            height: 32px;
            background: #00bcd4;
            border-radius: 6px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .navbar-menu {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 30px;
            flex: 2;
            justify-content: center;
        }
        
        .navbar-menu li a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .navbar-menu li a:hover {
            color: #00bcd4;
        }
        
        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn-login {
            background: #00bcd4;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .btn-login:hover {
            background: #00acc1;
        }
        
        /* Äiá»u chá»‰nh body Ä‘á»ƒ khÃ´ng bá»‹ che bá»Ÿi navbar */
        body {
            padding-top: 60px;
        }
        
        /* Documentation Page */
        .doc-container {
            display: none;
            height: calc(100vh - 60px);
            overflow: hidden;
        }
        
        .doc-layout {
            display: flex;
            height: 100%;
        }
        
        .doc-sidebar {
            width: 300px;
            background: rgba(20, 30, 45, 0.95);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
            padding: 20px 0;
        }
        
        .doc-content {
            flex: 1;
            background: rgba(26, 35, 50, 0.95);
            overflow-y: auto;
            padding: 30px;
        }
        
        .doc-nav {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .doc-nav-item {
            margin: 0;
        }
        
        .doc-nav-link {
            display: block;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .doc-nav-link:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #00bcd4;
            border-left-color: #00bcd4;
        }
        
        .doc-nav-link.active {
            background: rgba(0, 188, 212, 0.1);
            color: #00bcd4;
            border-left-color: #00bcd4;
        }
        
        .doc-nav-section {
            padding: 15px 20px 8px;
            font-size: 12px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .doc-nav-subsection {
            padding-left: 40px;
            font-size: 13px;
        }
        
        .documentation {
            display: block;
            max-width: none;
            margin: 0;
            padding: 0;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            color: white;
            transform-origin: top left;
            transition: transform 0.3s ease;
            position: relative;
            cursor: grab;
        }
        
        .documentation:active {
            cursor: grabbing;
        }
        
        .doc-container {
            overflow: hidden;
            position: relative;
            width: 100%;
            height: calc(100vh - 60px);
        }
        
        .doc-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .doc-header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .doc-header p {
            color: #b0c4de;
            font-size: 1.1em;
        }
        
        .doc-section {
            margin-bottom: 40px;
            padding: 20px;
            border-left: 4px solid #00bcd4;
            background: rgba(44, 62, 80, 0.3);
            border-radius: 0 8px 8px 0;
        }
        
        .doc-section h2 {
            color: white;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .doc-section h2::before {
            content: "ğŸ“¦";
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .doc-section h3 {
            color: #00bcd4;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
            padding-left: 20px;
            border-left: 3px solid #00bcd4;
        }
        
        .doc-section p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #e0e0e0;
        }
        
        .doc-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .doc-section li {
            margin-bottom: 8px;
            color: #d0d0d0;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .component-card {
            background: rgba(44, 62, 80, 0.6);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #00bcd4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .component-card h4 {
            color: #00bcd4;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .component-card p {
            font-size: 0.9em;
            color: #d0d0d0;
            margin: 0;
        }
        
        .back-btn {
            background: #00bcd4;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
            transition: background 0.3s;
            position: fixed;
            top: 70px;
            left: 20px;
            z-index: 1000;
        }
        
        .back-btn:hover {
            background: #00acc1;
        }
        
        .doc-controls {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        
        .doc-controls button {
            background: #00bcd4;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .doc-controls button:hover {
            background: #00acc1;
        }



    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="#" class="navbar-brand">
            <div class="logo">MS</div>
            Microservice Architecture
        </a>
        
        <ul class="navbar-menu">
            <li><a href="#" onclick="showDiagram()">Trang chá»§</a></li>
            <li><a href="#" onclick="showDiagram()">SÆ¡ Ä‘á»“</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">LiÃªn há»‡</a></li>
        </ul>
        
        <div style="flex: 1;"></div>

    </nav>

    <!-- Documentation Page -->
    <div class="doc-container" id="docContainer">
        <div class="doc-layout">
            <!-- Sidebar Navigation -->
            <div class="doc-sidebar">
                <div style="padding: 0 20px 20px;">
                    <button class="back-btn" onclick="showDiagram()" style="width: 100%; margin-bottom: 15px; position: static;">â† Quay láº¡i SÆ¡ Ä‘á»“</button>
                </div>
                
                <nav class="doc-nav">
                    <div class="doc-nav-section">Tá»•ng quan</div>
                    <div class="doc-nav-item">
                        <a href="#introduction" class="doc-nav-link active" onclick="scrollToSection('introduction')">ğŸ“– Giá»›i thiá»‡u</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#roadmap" class="doc-nav-link" onclick="scrollToSection('roadmap')">ğŸš€ Lá»™ trÃ¬nh Triá»ƒn khai</a>
                    </div>
                    
                    <div class="doc-nav-section">Kiáº¿n trÃºc</div>
                    <div class="doc-nav-item">
                        <a href="#frontend" class="doc-nav-link" onclick="scrollToSection('frontend')">ğŸ¨ Frontend Applications</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#api-gateway" class="doc-nav-link" onclick="scrollToSection('api-gateway')">ğŸšª API Gateway</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#backend" class="doc-nav-link" onclick="scrollToSection('backend')">âš™ï¸ Backend Services</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#infrastructure" class="doc-nav-link" onclick="scrollToSection('infrastructure')">ğŸ—ï¸ Infrastructure</a>
                    </div>
                    
                    <div class="doc-nav-section">Triá»ƒn khai</div>
                    <div class="doc-nav-item">
                        <a href="#deployment" class="doc-nav-link" onclick="scrollToSection('deployment')">ğŸ“‹ Thá»© tá»± Triá»ƒn khai</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#applications" class="doc-nav-link" onclick="scrollToSection('applications')">ğŸ¢ á»¨ng dá»¥ng Äá»™c láº­p</a>
                    </div>
                    
                    <div class="doc-nav-section">PhÃ¢n tÃ­ch SÃ¢u</div>
                    <div class="doc-nav-item">
                        <a href="#microservice-analysis" class="doc-nav-link" onclick="scrollToSection('microservice-analysis')">ğŸ” NguyÃªn táº¯c Thiáº¿t káº¿</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#patterns" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('patterns')">ğŸ”„ Patterns & Best Practices</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#scalability" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('scalability')">ğŸš€ Scalability & Performance</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#security" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('security')">ğŸ”’ Security & Monitoring</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#ddd" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('ddd')">ğŸ¯ Domain-Driven Design</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#devops" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('devops')">ğŸ”§ DevOps & Deployment</a>
                    </div>
                    <div class="doc-nav-item">
                        <a href="#optimization" class="doc-nav-link doc-nav-subsection" onclick="scrollToSection('optimization')">âš¡ Performance Optimization</a>
                    </div>
                    
                    <div class="doc-nav-section">Káº¿t luáº­n</div>
                    <div class="doc-nav-item">
                        <a href="#summary" class="doc-nav-link" onclick="scrollToSection('summary')">ğŸ“Š Tá»•ng káº¿t</a>
                    </div>
                </nav>
            </div>
            
            <!-- Main Content -->
            <div class="doc-content">
                <div class="doc-controls" style="position: fixed; top: 70px; right: 20px; z-index: 1000;">
                    <button onclick="zoomIn()">ğŸ”+</button>
                    <button onclick="zoomOut()">ğŸ”-</button>
                    <button onclick="resetZoom()">âš¡ Reset</button>
                </div>

                <div class="documentation" id="documentationPage">
                
                <div class="doc-header" id="introduction">
                    <h1>TÃ i liá»‡u Kiáº¿n trÃºc Microservice</h1>
                    <p>HÆ°á»›ng dáº«n chi tiáº¿t vá» 58 thÃ nh pháº§n vÃ  cÃ¡ch chÃºng káº¿t há»£p thÃ nh cÃ¡c á»©ng dá»¥ng Ä‘á»™c láº­p</p>
                </div>

        <div class="doc-section" id="roadmap">
            <h2>ğŸ“¦ ğŸš€ Implementation Roadmap - Lá»™ trÃ¬nh Triá»ƒn khai</h2>
            <p>Thá»© tá»± Æ°u tiÃªn triá»ƒn khai cÃ¡c khá»‘i dá»±a trÃªn dependencies, business priority vÃ  technical complexity.</p>
            
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 12px; line-height: 1.4;">
ğŸ—ï¸ IMPLEMENTATION PHASES:

Phase 1: FOUNDATION (Tuáº§n 1-2) - 4 khá»‘i
â”œâ”€â”€ Infrastructure Setup
â”‚   â”œâ”€â”€ Message Broker (RabbitMQ/Kafka)
â”‚   â”œâ”€â”€ Cache (Redis Cluster) 
â”‚   â””â”€â”€ Databases (PostgreSQL/MongoDB clusters)
â””â”€â”€ Core Authentication
    â””â”€â”€ User Service + User DB

Phase 2: API GATEWAY (Tuáº§n 3) - 2 khá»‘i  
â”œâ”€â”€ API Gateway User
â””â”€â”€ API Gateway Admin

Phase 3: CORE BUSINESS (Tuáº§n 4-6) - 6 khá»‘i
â”œâ”€â”€ Product Service + Product DB
â”œâ”€â”€ Cart Service + Cart DB  
â””â”€â”€ Payment Service + Payment DB

Phase 4: CONTENT & ADMIN (Tuáº§n 7-8) - 6 khá»‘i
â”œâ”€â”€ News Service + News DB
â”œâ”€â”€ Admin Service + Admin DB
â””â”€â”€ Shell Config Service + Shell Config DB

Phase 5: ADVANCED FEATURES (Tuáº§n 9-12) - 8 khá»‘i
â”œâ”€â”€ Design Calculation Service + DB
â”œâ”€â”€ Chatbot Service + Chatbot DB
â”œâ”€â”€ Communication Log Service + DB
â””â”€â”€ Football Service + Football DB

Phase 6: AGENT MANAGEMENT (Tuáº§n 13-14) - 4 khá»‘i
â”œâ”€â”€ Agent Management Service + DB
â””â”€â”€ Agent Policy Service + DB

Phase 7: FRONTEND APPLICATIONS (Tuáº§n 15-18) - 27 khá»‘i
â”œâ”€â”€ Shell App User + Shell App Admin (2 khá»‘i)
â”œâ”€â”€ User Frontend Components (12 khá»‘i)
â””â”€â”€ Admin Frontend Components (13 khá»‘i)

TOTAL: 57 khá»‘i trong 18 tuáº§n
                </pre>
            </div>

            <h3>ğŸ“‹ Chi tiáº¿t tá»«ng Phase:</h3>
            
            <div class="component-grid">
                <div class="component-card">
                    <h4>ğŸ—ï¸ Phase 1: Foundation</h4>
                    <p><strong>Thá»i gian:</strong> 2 tuáº§n Ä‘áº§u</p>
                    <p><strong>Má»¥c tiÃªu:</strong> XÃ¢y dá»±ng háº¡ táº§ng cÆ¡ sá»Ÿ</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Táº¥t cáº£ services khÃ¡c phá»¥ thuá»™c vÃ o infrastructure vÃ  authentication</p>
                </div>
                <div class="component-card">
                    <h4>ğŸšª Phase 2: API Gateway</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 3</p>
                    <p><strong>Má»¥c tiÃªu:</strong> Entry point cho táº¥t cáº£ requests</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Cáº§n cÃ³ trÆ°á»›c khi triá»ƒn khai business services</p>
                </div>
                <div class="component-card">
                    <h4>ğŸ’¼ Phase 3: Core Business</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 4-6</p>
                    <p><strong>Má»¥c tiÃªu:</strong> Chá»©c nÄƒng kinh doanh cá»‘t lÃµi</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Táº¡o revenue, MVP functionality</p>
                </div>
                <div class="component-card">
                    <h4>ğŸ“° Phase 4: Content & Admin</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 7-8</p>
                    <p><strong>Má»¥c tiÃªu:</strong> Quáº£n lÃ½ ná»™i dung vÃ  há»‡ thá»‘ng</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Há»— trá»£ váº­n hÃ nh vÃ  marketing</p>
                </div>
                <div class="component-card">
                    <h4>ğŸ”¬ Phase 5: Advanced Features</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 9-12</p>
                    <p><strong>Má»¥c tiÃªu:</strong> TÃ­nh nÄƒng nÃ¢ng cao, AI/ML</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Competitive advantage, complex features</p>
                </div>
                <div class="component-card">
                    <h4>ğŸ¤ Phase 6: Agent Management</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 13-14</p>
                    <p><strong>Má»¥c tiÃªu:</strong> Quáº£n lÃ½ Ä‘áº¡i lÃ½ vÃ  chÃ­nh sÃ¡ch</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> Business expansion, partner management</p>
                </div>
                <div class="component-card">
                    <h4>ğŸ¨ Phase 7: Frontend Apps</h4>
                    <p><strong>Thá»i gian:</strong> Tuáº§n 15-18</p>
                    <p><strong>Má»¥c tiÃªu:</strong> Giao diá»‡n ngÆ°á»i dÃ¹ng hoÃ n chá»‰nh</p>
                    <p><strong>LÃ½ do Æ°u tiÃªn:</strong> User experience, sau khi backend á»•n Ä‘á»‹nh</p>
                </div>
            </div>
        </div>

        <div class="doc-section" id="frontend">
            <h2>ğŸ“¦ Frontend Applications (á»¨ng dá»¥ng Giao diá»‡n)</h2>
            <p>Lá»›p giao diá»‡n ngÆ°á»i dÃ¹ng, bao gá»“m cÃ¡c á»©ng dá»¥ng web vÃ  mobile cho ngÆ°á»i dÃ¹ng cuá»‘i vÃ  quáº£n trá»‹ viÃªn.</p>
            
            <h3>ğŸ—ï¸ Kiáº¿n trÃºc Frontend Domain</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 12px; line-height: 1.4;">
Frontend Architecture Flow:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Shell App     â”‚    â”‚   Shell App     â”‚
â”‚     User        â”‚    â”‚     Admin       â”‚
â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Routing       â”‚    â”‚ â€¢ Admin Routes  â”‚
â”‚ â€¢ Auth Guard    â”‚    â”‚ â€¢ Role Check    â”‚
â”‚ â€¢ State Mgmt    â”‚    â”‚ â€¢ Audit Logs    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Micro-Frontend Components             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User FE     â”‚ Admin FE    â”‚ Shared Components   â”‚
â”‚ (12 khá»‘i)   â”‚ (12 khá»‘i)   â”‚ â€¢ UI Library        â”‚
â”‚             â”‚             â”‚ â€¢ Common Utils      â”‚
â”‚ â€¢ Cart FE   â”‚ â€¢ Cart Adminâ”‚ â€¢ Auth Components   â”‚
â”‚ â€¢ Product FEâ”‚ â€¢ Prod Adminâ”‚ â€¢ Error Handling    â”‚
â”‚ â€¢ News FE   â”‚ â€¢ News Adminâ”‚ â€¢ Loading States    â”‚
â”‚ â€¢ ...       â”‚ â€¢ ...       â”‚ â€¢ Form Validation   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway Layer                  â”‚
â”‚  â€¢ Authentication & Authorization               â”‚
â”‚  â€¢ Request Routing & Load Balancing            â”‚
â”‚  â€¢ Rate Limiting & Caching                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
            </div>
            
            <h3>Shell App User (á»¨ng dá»¥ng Shell NgÆ°á»i dÃ¹ng)</h3>
            <p><strong>Nhiá»‡m vá»¥:</strong> LÃ  á»©ng dá»¥ng chÃ­nh (shell) tÃ­ch há»£p táº¥t cáº£ cÃ¡c micro-frontend cho ngÆ°á»i dÃ¹ng cuá»‘i.</p>
            <ul>
                <li>Quáº£n lÃ½ routing vÃ  navigation giá»¯a cÃ¡c module</li>
                <li>Xá»­ lÃ½ authentication vÃ  authorization</li>
                <li>Chia sáº» state vÃ  context chung</li>
                <li>Tá»‘i Æ°u hÃ³a performance vÃ  loading</li>
            </ul>

            <h3>Shell App Admin (á»¨ng dá»¥ng Shell Quáº£n trá»‹)</h3>
            <p><strong>Nhiá»‡m vá»¥:</strong> á»¨ng dá»¥ng shell riÃªng biá»‡t cho cÃ¡c chá»©c nÄƒng quáº£n trá»‹ há»‡ thá»‘ng.</p>
            <ul>
                <li>Quáº£n lÃ½ dashboard vÃ  bÃ¡o cÃ¡o</li>
                <li>Äiá»u khiá»ƒn quyá»n truy cáº­p vÃ  phÃ¢n quyá»n</li>
                <li>GiÃ¡m sÃ¡t há»‡ thá»‘ng vÃ  logs</li>
                <li>Cáº¥u hÃ¬nh vÃ  thiáº¿t láº­p há»‡ thá»‘ng</li>
            </ul>

            <h3>User Frontend Components (12 khá»‘i)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service Frontend</h4>
                    <p>Giao diá»‡n quáº£n lÃ½ giá» hÃ ng, thÃªm/xÃ³a sáº£n pháº©m, tÃ­nh toÃ¡n tá»•ng tiá»n</p>
                </div>
                <div class="component-card">
                    <h4>Product Service Frontend</h4>
                    <p>Hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m, chi tiáº¿t sáº£n pháº©m, tÃ¬m kiáº¿m vÃ  lá»c</p>
                </div>
                <div class="component-card">
                    <h4>News Service Frontend</h4>
                    <p>Hiá»ƒn thá»‹ tin tá»©c, bÃ i viáº¿t, thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Frontend</h4>
                    <p>CÃ´ng cá»¥ tÃ­nh toÃ¡n thiáº¿t káº¿, mÃ´ phá»ng vÃ  visualization</p>
                </div>
                <div class="component-card">
                    <h4>Football Service Frontend</h4>
                    <p>Giao diá»‡n dá»‹ch vá»¥ bÃ³ng Ä‘Ã¡, lá»‹ch thi Ä‘áº¥u, káº¿t quáº£</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Frontend</h4>
                    <p>Giao diá»‡n nháº­t kÃ½ thi cÃ´ng, theo dÃµi tiáº¿n Ä‘á»™ dá»± Ã¡n</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service Frontend</h4>
                    <p>Giao diá»‡n chat bot, há»— trá»£ khÃ¡ch hÃ ng tá»± Ä‘á»™ng</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service Frontend</h4>
                    <p>Giao diá»‡n thanh toÃ¡n, xá»­ lÃ½ giao dá»‹ch, lá»‹ch sá»­ thanh toÃ¡n</p>
                </div>
                <div class="component-card">
                    <h4>User Service Frontend</h4>
                    <p>Quáº£n lÃ½ thÃ´ng tin cÃ¡ nhÃ¢n, Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service Frontend</h4>
                    <p>Giao diá»‡n quáº£n trá»‹ tá»•ng thá»ƒ, dashboard, bÃ¡o cÃ¡o</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Frontend</h4>
                    <p>Quáº£n lÃ½ Ä‘áº¡i lÃ½, thÃ´ng tin Ä‘á»‘i tÃ¡c, hoa há»“ng</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Frontend</h4>
                    <p>Quáº£n lÃ½ chÃ­nh sÃ¡ch Ä‘áº¡i lÃ½, quy Ä‘á»‹nh, Ä‘iá»u khoáº£n</p>
                </div>
            </div>

            <h3>Admin Frontend Components (13 khá»‘i)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service Admin</h4>
                    <p>Quáº£n trá»‹ giá» hÃ ng: xem táº¥t cáº£ giá» hÃ ng, thá»‘ng kÃª, quáº£n lÃ½ abandoned carts</p>
                </div>
                <div class="component-card">
                    <h4>Product Service Admin</h4>
                    <p>Quáº£n trá»‹ sáº£n pháº©m: CRUD sáº£n pháº©m, quáº£n lÃ½ inventory, pricing, categories</p>
                </div>
                <div class="component-card">
                    <h4>News Service Admin</h4>
                    <p>Quáº£n trá»‹ tin tá»©c: táº¡o/sá»­a/xÃ³a bÃ i viáº¿t, quáº£n lÃ½ categories, scheduling</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Admin</h4>
                    <p>Quáº£n trá»‹ tÃ­nh toÃ¡n thiáº¿t káº¿: cáº¥u hÃ¬nh formulas, templates, validation rules</p>
                </div>
                <div class="component-card">
                    <h4>Football Service Admin</h4>
                    <p>Quáº£n trá»‹ bÃ³ng Ä‘Ã¡: quáº£n lÃ½ lá»‹ch thi Ä‘áº¥u, teams, results, statistics</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Admin</h4>
                    <p>Quáº£n trá»‹ nháº­t kÃ½ thi cÃ´ng: xem logs, reports, project tracking</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service Admin</h4>
                    <p>Quáº£n trá»‹ chatbot: training data, responses, analytics, conversation flows</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service Admin</h4>
                    <p>Quáº£n trá»‹ thanh toÃ¡n: transaction monitoring, refunds, payment methods</p>
                </div>
                <div class="component-card">
                    <h4>User Service Admin</h4>
                    <p>Quáº£n trá»‹ ngÆ°á»i dÃ¹ng: user management, roles, permissions, account status</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service Admin</h4>
                    <p>Quáº£n trá»‹ há»‡ thá»‘ng: system settings, monitoring, logs, maintenance</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Admin</h4>
                    <p>Quáº£n trá»‹ Ä‘áº¡i lÃ½: agent registration, hierarchy, performance tracking</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Admin</h4>
                    <p>Quáº£n trá»‹ chÃ­nh sÃ¡ch Ä‘áº¡i lÃ½: policy creation, compliance monitoring</p>
                </div>
                <div class="component-card">
                    <h4>Shell Config Admin</h4>
                    <p>Quáº£n trá»‹ cáº¥u hÃ¬nh Shell: dynamic settings, feature flags, environment configurations</p>
                </div>
            </div>
        </div>

        <div class="doc-section" id="api-gateway">
            <h2>ğŸ“¦ API Gateway (Cá»•ng API)</h2>
            <p>Äiá»ƒm truy cáº­p duy nháº¥t cho táº¥t cáº£ cÃ¡c request tá»« client Ä‘áº¿n backend services.</p>
            
            <h3>API Gateway User</h3>
            <p><strong>Nhiá»‡m vá»¥:</strong> Xá»­ lÃ½ cÃ¡c request tá»« á»©ng dá»¥ng ngÆ°á»i dÃ¹ng cuá»‘i.</p>
            <ul>
                <li>Authentication vÃ  authorization cho user</li>
                <li>Rate limiting vÃ  throttling</li>
                <li>Request routing Ä‘áº¿n cÃ¡c microservices</li>
                <li>Response aggregation vÃ  transformation</li>
            </ul>

            <h3>API Gateway Admin</h3>
            <p><strong>Nhiá»‡m vá»¥:</strong> Xá»­ lÃ½ cÃ¡c request tá»« á»©ng dá»¥ng quáº£n trá»‹.</p>
            <ul>
                <li>PhÃ¢n quyá»n admin vÃ  super admin</li>
                <li>Logging vÃ  monitoring chi tiáº¿t</li>
                <li>API versioning vÃ  backward compatibility</li>
                <li>Security policies vÃ  firewall rules</li>
            </ul>
        </div>

        <div class="doc-section" id="backend">
            <h2>Backend Microservices (Dá»‹ch vá»¥ Backend)</h2>
            <p>CÃ¡c dá»‹ch vá»¥ Ä‘á»™c láº­p xá»­ lÃ½ logic nghiá»‡p vá»¥ cá»¥ thá»ƒ, cÃ³ thá»ƒ phÃ¡t triá»ƒn vÃ  triá»ƒn khai riÃªng biá»‡t. <strong>Tá»•ng cá»™ng: 13 services</strong></p>

            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart Service</h4>
                    <p>Quáº£n lÃ½ giá» hÃ ng: thÃªm/xÃ³a sáº£n pháº©m, tÃ­nh toÃ¡n giÃ¡, Ã¡p dá»¥ng khuyáº¿n mÃ£i, session management</p>
                </div>
                <div class="component-card">
                    <h4>Product Service</h4>
                    <p>Quáº£n lÃ½ sáº£n pháº©m: CRUD operations, inventory tracking, categories, pricing, search</p>
                </div>
                <div class="component-card">
                    <h4>News Service</h4>
                    <p>Quáº£n lÃ½ tin tá»©c: táº¡o/sá»­a/xÃ³a bÃ i viáº¿t, phÃ¢n loáº¡i, scheduling, SEO optimization</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation Service</h4>
                    <p>TÃ­nh toÃ¡n thiáº¿t káº¿: complex algorithms, formulas, simulation engine, validation</p>
                </div>
                <div class="component-card">
                    <h4>Football Service</h4>
                    <p>Dá»‹ch vá»¥ bÃ³ng Ä‘Ã¡: lá»‹ch thi Ä‘áº¥u, káº¿t quáº£, thá»‘ng kÃª, team management, betting odds</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log Service</h4>
                    <p>Nháº­t kÃ½ thi cÃ´ng: activity tracking, progress monitoring, reporting, notifications</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot Service</h4>
                    <p>AI Chatbot: NLP processing, intent recognition, response generation, learning</p>
                </div>
                <div class="component-card">
                    <h4>Payment Service</h4>
                    <p>Xá»­ lÃ½ thanh toÃ¡n: payment gateway integration, transaction processing, refunds</p>
                </div>
                <div class="component-card">
                    <h4>User Service</h4>
                    <p>Quáº£n lÃ½ ngÆ°á»i dÃ¹ng: authentication, profile management, permissions, security</p>
                </div>
                <div class="component-card">
                    <h4>Shell Config Service</h4>
                    <p>Cáº¥u hÃ¬nh Shell: dynamic configuration, feature flags, environment settings</p>
                </div>
                <div class="component-card">
                    <h4>Admin Service</h4>
                    <p>Dá»‹ch vá»¥ quáº£n trá»‹: system management, monitoring, analytics, maintenance</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management Service</h4>
                    <p>Quáº£n lÃ½ Ä‘áº¡i lÃ½: registration, hierarchy management, commission calculation</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy Service</h4>
                    <p>ChÃ­nh sÃ¡ch Ä‘áº¡i lÃ½: rules engine, policy management, compliance checking</p>
                </div>
            </div>
        </div>

        <div class="doc-section" id="backend">
            <h2>Infrastructure (Háº¡ táº§ng)</h2>
            <p>Lá»›p háº¡ táº§ng bao gá»“m databases, message broker, cache vÃ  cÃ¡c thÃ nh pháº§n há»— trá»£. <strong>Tá»•ng cá»™ng: 15 components</strong></p>

            <h3>Core Infrastructure (2 khá»‘i)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Message Broker</h4>
                    <p>Há»‡ thá»‘ng message queue: RabbitMQ/Apache Kafka cho async communication giá»¯a services</p>
                </div>
                <div class="component-card">
                    <h4>Cache</h4>
                    <p>Distributed caching: Redis cluster cho performance optimization vÃ  session storage</p>
                </div>
            </div>

            <h3>Databases (13 khá»‘i)</h3>
            <div class="component-grid">
                <div class="component-card">
                    <h4>Cart DB</h4>
                    <p>Database giá» hÃ ng: cart items, session data, temporary storage, expiration management</p>
                </div>
                <div class="component-card">
                    <h4>Product DB</h4>
                    <p>Database sáº£n pháº©m: product catalog, inventory, pricing, categories, specifications</p>
                </div>
                <div class="component-card">
                    <h4>News DB</h4>
                    <p>Database tin tá»©c: articles, categories, tags, publishing schedule, SEO metadata</p>
                </div>
                <div class="component-card">
                    <h4>Design Calculation DB</h4>
                    <p>Database tÃ­nh toÃ¡n: formulas, templates, calculation history, validation rules</p>
                </div>
                <div class="component-card">
                    <h4>Football DB</h4>
                    <p>Database bÃ³ng Ä‘Ã¡: teams, matches, results, statistics, betting data</p>
                </div>
                <div class="component-card">
                    <h4>Communication Log DB</h4>
                    <p>Database nháº­t kÃ½: activity logs, project tracking, progress reports, notifications</p>
                </div>
                <div class="component-card">
                    <h4>Chatbot DB</h4>
                    <p>Database chatbot: conversation history, training data, intents, responses</p>
                </div>
                <div class="component-card">
                    <h4>Payment DB</h4>
                    <p>Database thanh toÃ¡n: transactions, payment methods, billing info, refund records</p>
                </div>
                <div class="component-card">
                    <h4>User DB</h4>
                    <p>Database ngÆ°á»i dÃ¹ng: user profiles, credentials, preferences, authentication data</p>
                </div>
                <div class="component-card">
                    <h4>Shell Config DB</h4>
                    <p>Database cáº¥u hÃ¬nh: dynamic settings, feature flags, environment configurations</p>
                </div>
                <div class="component-card">
                    <h4>Admin DB</h4>
                    <p>Database quáº£n trá»‹: system settings, admin users, roles, permissions, audit logs</p>
                </div>
                <div class="component-card">
                    <h4>Agent Management DB</h4>
                    <p>Database Ä‘áº¡i lÃ½: agent profiles, hierarchy, commission data, performance metrics</p>
                </div>
                <div class="component-card">
                    <h4>Agent Policy DB</h4>
                    <p>Database chÃ­nh sÃ¡ch: policy rules, compliance data, terms & conditions</p>
                </div>
            </div>
        </div>

        <div class="doc-section" id="backend">
            <h2>ğŸš€ Thá»© tá»± Triá»ƒn khai & Dependencies</h2>
            <p>Äá»ƒ triá»ƒn khai há»‡ thá»‘ng microservice hiá»‡u quáº£, cáº§n tuÃ¢n theo thá»© tá»± dependencies vÃ  Æ°u tiÃªn.</p>
            
            <h3>ğŸ“‹ Phase 1: Core Infrastructure (Æ¯u tiÃªn cao nháº¥t)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>ğŸ”¥ 1. Message Broker</h4>
                    <p><strong>Triá»ƒn khai Ä‘áº§u tiÃªn:</strong> RabbitMQ/Kafka - Ná»n táº£ng communication</p>
                    <p><strong>Dependencies:</strong> KhÃ´ng cÃ³</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>ğŸ”¥ 2. Cache (Redis)</h4>
                    <p><strong>Triá»ƒn khai thá»© 2:</strong> Session storage, caching layer</p>
                    <p><strong>Dependencies:</strong> KhÃ´ng cÃ³</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #e74c3c;">
                    <h4>ğŸ”¥ 3. User DB</h4>
                    <p><strong>Triá»ƒn khai thá»© 3:</strong> Authentication foundation</p>
                    <p><strong>Dependencies:</strong> Message Broker, Cache</p>
                </div>
            </div>

            <h3>ğŸ“‹ Phase 2: Core Services (Æ¯u tiÃªn cao)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>âš¡ 4. User Service</h4>
                    <p><strong>Core service:</strong> Authentication, authorization</p>
                    <p><strong>Dependencies:</strong> User DB, Cache, Message Broker</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>âš¡ 5. API Gateway User</h4>
                    <p><strong>Entry point:</strong> Request routing, auth validation</p>
                    <p><strong>Dependencies:</strong> User Service</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #f39c12;">
                    <h4>âš¡ 6. Shell Config Service + DB</h4>
                    <p><strong>Configuration:</strong> Dynamic settings, feature flags</p>
                    <p><strong>Dependencies:</strong> User Service, API Gateway</p>
                </div>
            </div>

            <h3>ğŸ“‹ Phase 3: Business Services (Æ¯u tiÃªn trung bÃ¬nh)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #27ae60;">
                    <h4>ğŸŸ¢ 7-10. Core Business Services</h4>
                    <p><strong>Triá»ƒn khai song song:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Product Service + Product DB</li>
                        <li>Cart Service + Cart DB</li>
                        <li>Payment Service + Payment DB</li>
                        <li>News Service + News DB</li>
                    </ul>
                    <p><strong>Dependencies:</strong> API Gateway, User Service</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #27ae60;">
                    <h4>ğŸŸ¢ 11-15. Extended Services</h4>
                    <p><strong>Triá»ƒn khai song song:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Design Calculation Service + DB</li>
                        <li>Football Service + DB</li>
                        <li>Communication Log Service + DB</li>
                        <li>Chatbot Service + DB</li>
                        <li>Agent Management Service + DB</li>
                    </ul>
                    <p><strong>Dependencies:</strong> Core Business Services</p>
                </div>
            </div>

            <h3>ğŸ“‹ Phase 4: Admin Layer (Æ¯u tiÃªn tháº¥p)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #9b59b6;">
                    <h4>ğŸ”µ 16-17. Admin Infrastructure</h4>
                    <p><strong>Admin foundation:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Admin Service + Admin DB</li>
                        <li>API Gateway Admin</li>
                    </ul>
                    <p><strong>Dependencies:</strong> All Business Services</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #9b59b6;">
                    <h4>ğŸ”µ 18. Agent Policy Service + DB</h4>
                    <p><strong>Policy management:</strong> Rules engine, compliance</p>
                    <p><strong>Dependencies:</strong> Agent Management Service</p>
                </div>
            </div>

            <h3>ğŸ“‹ Phase 5: Frontend Layer (Cuá»‘i cÃ¹ng)</h3>
            <div class="component-grid">
                <div class="component-card" style="border-left: 4px solid #3498db;">
                    <h4>ğŸ”· 19-20. Shell Applications</h4>
                    <p><strong>Frontend shells:</strong></p>
                    <ul style="margin: 10px 0; color: #d0d0d0;">
                        <li>Shell App User</li>
                        <li>Shell App Admin</li>
                    </ul>
                    <p><strong>Dependencies:</strong> API Gateways, All Services</p>
                </div>
                <div class="component-card" style="border-left: 4px solid #3498db;">
                    <h4>ğŸ”· 21-44. Frontend Components</h4>
                    <p><strong>Micro-frontends:</strong> 12 User FE + 13 Admin FE</p>
                    <p><strong>Dependencies:</strong> Shell Apps, Backend Services</p>
                </div>
            </div>

            <h3>ğŸ”„ Inter-Service Dependencies Map</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 11px; line-height: 1.3;">
Critical Path Dependencies:

Message Broker â”€â”€â”
Cache â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ User Service â”€â”€â†’ API Gateway â”€â”€â†’ Shell Apps â”€â”€â†’ Frontend Components
User DB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
                                           â–¼
                                    Business Services
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ â€¢ Product       â”‚
                                    â”‚ â€¢ Cart          â”‚â”€â”€â†’ Admin Services â”€â”€â†’ Admin Frontend
                                    â”‚ â€¢ Payment       â”‚
                                    â”‚ â€¢ News          â”‚
                                    â”‚ â€¢ Design Calc   â”‚
                                    â”‚ â€¢ Football      â”‚
                                    â”‚ â€¢ Comm Log      â”‚
                                    â”‚ â€¢ Chatbot       â”‚
                                    â”‚ â€¢ Agent Mgmt    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Parallel Development Possible:
â€¢ Phase 3 services can be developed simultaneously
â€¢ Frontend components can be built in parallel once APIs are ready
â€¢ Admin layer can be developed after business logic is stable
                </pre>
            </div>
        </div>

        <div class="doc-section" id="backend">
            <h2>ğŸ¢ á»¨ng dá»¥ng Äá»™c láº­p (Independent Applications)</h2>
            <p>CÃ¡c khá»‘i trong há»‡ thá»‘ng káº¿t há»£p vá»›i nhau táº¡o thÃ nh nhá»¯ng <strong>á»©ng dá»¥ng hoÃ n chá»‰nh cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p</strong>. Má»—i á»©ng dá»¥ng bao gá»“m Frontend, Backend vÃ  Database riÃªng biá»‡t, Ä‘áº£m báº£o tÃ­nh tá»± chá»§ vÃ  khÃ´ng phá»¥ thuá»™c vÃ o cÃ¡c á»©ng dá»¥ng khÃ¡c.</p>
            
            <h3>ğŸ“± 12 á»¨ng dá»¥ng Nghiá»‡p vá»¥ Äá»™c láº­p:</h3>
            
            <div class="component-grid">
                <div class="component-card" style="border: 2px solid #e74c3c;">
                    <h4>ğŸ›’ 1. á»¨ng dá»¥ng Giá» hÃ ng (Cart Application)</h4>
                    <p><strong>Frontend:</strong> Cart Service Frontend + Cart Service Admin</p>
                    <p><strong>Backend:</strong> Cart Service</p>
                    <p><strong>Database:</strong> Cart DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Quáº£n lÃ½ giá» hÃ ng, thÃªm/xÃ³a sáº£n pháº©m, tÃ­nh toÃ¡n tá»•ng tiá»n</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #f39c12;">
                    <h4>ğŸ“¦ 2. á»¨ng dá»¥ng Sáº£n pháº©m (Product Application)</h4>
                    <p><strong>Frontend:</strong> Product Service Frontend + Product Service Admin</p>
                    <p><strong>Backend:</strong> Product Service</p>
                    <p><strong>Database:</strong> Product DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Quáº£n lÃ½ catalog, inventory, pricing, categories</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #27ae60;">
                    <h4>ğŸ“° 3. á»¨ng dá»¥ng Tin tá»©c (News Application)</h4>
                    <p><strong>Frontend:</strong> News Service Frontend + News Service Admin</p>
                    <p><strong>Backend:</strong> News Service</p>
                    <p><strong>Database:</strong> News DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Quáº£n lÃ½ tin tá»©c, bÃ i viáº¿t, phÃ¢n loáº¡i, publishing</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #3498db;">
                    <h4>ğŸ“ 4. á»¨ng dá»¥ng TÃ­nh toÃ¡n Thiáº¿t káº¿ (Design Calculation Application)</h4>
                    <p><strong>Frontend:</strong> Design Calculation Frontend + Design Calculation Admin</p>
                    <p><strong>Backend:</strong> Design Calculation Service</p>
                    <p><strong>Database:</strong> Design Calculation DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Algorithms, formulas, simulation engine, validation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #9b59b6;">
                    <h4>âš½ 5. á»¨ng dá»¥ng BÃ³ng Ä‘Ã¡ (Football Application)</h4>
                    <p><strong>Frontend:</strong> Football Service Frontend + Football Service Admin</p>
                    <p><strong>Backend:</strong> Football Service</p>
                    <p><strong>Database:</strong> Football DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Lá»‹ch thi Ä‘áº¥u, káº¿t quáº£, thá»‘ng kÃª, team management</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #e67e22;">
                    <h4>ğŸ“‹ 6. á»¨ng dá»¥ng Nháº­t kÃ½ thi cÃ´ng (Communication Log Application)</h4>
                    <p><strong>Frontend:</strong> Communication Log Frontend + Communication Log Admin</p>
                    <p><strong>Backend:</strong> Communication Log Service</p>
                    <p><strong>Database:</strong> Communication Log DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Activity tracking, progress monitoring, reporting</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #1abc9c;">
                    <h4>ğŸ¤– 7. á»¨ng dá»¥ng Chatbot (Chatbot Application)</h4>
                    <p><strong>Frontend:</strong> Chatbot Service Frontend + Chatbot Service Admin</p>
                    <p><strong>Backend:</strong> Chatbot Service</p>
                    <p><strong>Database:</strong> Chatbot DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> NLP processing, intent recognition, response generation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #e74c3c;">
                    <h4>ğŸ’³ 8. á»¨ng dá»¥ng Thanh toÃ¡n (Payment Application)</h4>
                    <p><strong>Frontend:</strong> Payment Service Frontend + Payment Service Admin</p>
                    <p><strong>Backend:</strong> Payment Service</p>
                    <p><strong>Database:</strong> Payment DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Payment gateway integration, transaction processing</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #34495e;">
                    <h4>ğŸ‘¤ 9. á»¨ng dá»¥ng NgÆ°á»i dÃ¹ng (User Application)</h4>
                    <p><strong>Frontend:</strong> User Service Frontend + User Service Admin</p>
                    <p><strong>Backend:</strong> User Service</p>
                    <p><strong>Database:</strong> User DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Authentication, profile management, permissions</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #95a5a6;">
                    <h4>âš™ï¸ 10. á»¨ng dá»¥ng Quáº£n trá»‹ (Admin Application)</h4>
                    <p><strong>Frontend:</strong> Admin Service Frontend + Admin Service Admin</p>
                    <p><strong>Backend:</strong> Admin Service</p>
                    <p><strong>Database:</strong> Admin DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> System management, monitoring, analytics</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #f1c40f;">
                    <h4>ğŸ¤ 11. á»¨ng dá»¥ng Quáº£n lÃ½ Äáº¡i lÃ½ (Agent Management Application)</h4>
                    <p><strong>Frontend:</strong> Agent Management Frontend + Agent Management Admin</p>
                    <p><strong>Backend:</strong> Agent Management Service</p>
                    <p><strong>Database:</strong> Agent Management DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Registration, hierarchy, commission calculation</p>
                </div>
                
                <div class="component-card" style="border: 2px solid #8e44ad;">
                    <h4>ğŸ“œ 12. á»¨ng dá»¥ng ChÃ­nh sÃ¡ch Äáº¡i lÃ½ (Agent Policy Application)</h4>
                    <p><strong>Frontend:</strong> Agent Policy Frontend + Agent Policy Admin</p>
                    <p><strong>Backend:</strong> Agent Policy Service</p>
                    <p><strong>Database:</strong> Agent Policy DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Rules engine, policy management, compliance</p>
                </div>
            </div>

            <h3>ğŸ”§ á»¨ng dá»¥ng Há»— trá»£:</h3>
            <div class="component-grid">
                <div class="component-card" style="border: 2px solid #16a085;">
                    <h4>âš™ï¸ Shell Configuration Application</h4>
                    <p><strong>Backend:</strong> Shell Config Service</p>
                    <p><strong>Database:</strong> Shell Config DB</p>
                    <p><strong>Chá»©c nÄƒng:</strong> Quáº£n lÃ½ cáº¥u hÃ¬nh cho Shell Apps (Shell App User, Shell App Admin)</p>
                    <p><strong>LÆ°u Ã½:</strong> á»¨ng dá»¥ng Ä‘á»™c láº­p quáº£n lÃ½ cáº¥u hÃ¬nh Ä‘á»™ng</p>
                </div>
            </div>

            <h3>ğŸ—ï¸ ThÃ nh pháº§n DÃ¹ng chung (Shared Infrastructure):</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="color: #00bcd4; font-weight: bold;">CÃ¡c thÃ nh pháº§n sau khÃ´ng táº¡o thÃ nh "á»©ng dá»¥ng hoÃ n chá»‰nh" nhÆ°ng há»— trá»£ cho táº¥t cáº£ á»©ng dá»¥ng Ä‘á»™c láº­p:</p>
                <ul style="color: #d0d0d0; margin: 10px 0;">
                    <li><strong>API Gateway (User/Admin):</strong> Entry point, routing, authentication</li>
                    <li><strong>Message Broker:</strong> Inter-service communication</li>
                    <li><strong>Cache (Redis):</strong> Performance optimization, session storage</li>
                    <li><strong>Shell App User/Admin:</strong> Frontend orchestration shells</li>
                    <li><strong>Infrastructure Layer:</strong> Docker, Kubernetes, Cloud Services, Monitoring, Logging, Security</li>
                </ul>
            </div>

            <h3>ğŸ”„ Kiáº¿n trÃºc á»¨ng dá»¥ng Äá»™c láº­p:</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <pre style="color: #00bcd4; font-family: monospace; font-size: 11px; line-height: 1.3;">
Má»—i á»©ng dá»¥ng Ä‘á»™c láº­p cÃ³ kiáº¿n trÃºc 3-tier:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND LAYER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   User Frontend     â”‚  â”‚   Admin Frontend        â”‚   â”‚
â”‚  â”‚   (End Users)       â”‚  â”‚   (Administrators)      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SHARED INFRASTRUCTURE                   â”‚
â”‚           API Gateway â†’ Authentication â†’ Routing        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND LAYER                        â”‚
â”‚              Microservice (Business Logic)              â”‚
â”‚         â€¢ REST APIs  â€¢ Business Rules  â€¢ Validation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE LAYER                       â”‚
â”‚                 Dedicated Database                      â”‚
â”‚            â€¢ Data Storage  â€¢ Persistence  â€¢ Backup     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Lá»£i Ã­ch cá»§a kiáº¿n trÃºc nÃ y:
âœ… Äá»™c láº­p hoÃ n toÃ n - cÃ³ thá»ƒ deploy/scale riÃªng biá»‡t
âœ… Team autonomy - má»—i team phá»¥ trì±… má»™t á»©ng dá»¥ng
âœ… Technology diversity - má»—i á»©ng dá»¥ng cÃ³ thá»ƒ dÃ¹ng tech stack khÃ¡c
âœ… Fault isolation - lá»—i má»™t á»©ng dá»¥ng khÃ´ng áº£nh hÆ°á»Ÿng á»©ng dá»¥ng khÃ¡c
                </pre>
            </div>
        </div>

        <div class="doc-section" id="backend">
            <h2>ğŸ” PhÃ¢n tÃ­ch SÃ¢u vá» Kiáº¿n trÃºc Microservice</h2>
            
            <h3>ğŸ—ï¸ NguyÃªn táº¯c Thiáº¿t káº¿ Microservice</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #00bcd4;">1. Single Responsibility Principle (SRP)</h4>
                <p>Má»—i microservice chá»‰ chá»‹u trì±…nhiá»‡m cho má»™t domain nghiá»‡p vá»¥ cá»¥ thá»ƒ:</p>
                <ul>
                    <li><strong>Cart Service:</strong> Chá»‰ quáº£n lÃ½ giá» hÃ ng - thÃªm/xÃ³a sáº£n pháº©m, tÃ­nh toÃ¡n giÃ¡</li>
                    <li><strong>User Service:</strong> Chá»‰ quáº£n lÃ½ ngÆ°á»i dÃ¹ng - authentication, profile, permissions</li>
                    <li><strong>Payment Service:</strong> Chá»‰ xá»­ lÃ½ thanh toÃ¡n - payment gateway, transactions</li>
                </ul>
                
                <h4 style="color: #00bcd4;">2. Database per Service</h4>
                <p>Má»—i service cÃ³ database riÃªng biá»‡t Ä‘á»ƒ Ä‘áº£m báº£o data isolation:</p>
                <ul>
                    <li><strong>TrÃ¡nh shared database:</strong> KhÃ´ng cÃ³ service nÃ o truy cáº­p trá»±c tiáº¿p database cá»§a service khÃ¡c</li>
                    <li><strong>Data consistency:</strong> Sá»­ dá»¥ng Saga pattern cho distributed transactions</li>
                    <li><strong>Technology diversity:</strong> Má»—i service cÃ³ thá»ƒ chá»n database phÃ¹ há»£p (SQL, NoSQL, Graph DB)</li>
                </ul>
                
                <h4 style="color: #00bcd4;">3. API-First Design</h4>
                <p>Táº¥t cáº£ communication thÃ´ng qua well-defined APIs:</p>
                <ul>
                    <li><strong>RESTful APIs:</strong> Cho synchronous communication</li>
                    <li><strong>Event-driven:</strong> Cho asynchronous communication qua Message Broker</li>
                    <li><strong>API Gateway:</strong> Single entry point vá»›i routing, authentication, rate limiting</li>
                </ul>
            </div>

            <h3 id="patterns">ğŸ”„ Patterns vÃ  Best Practices</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #e74c3c;">Circuit Breaker Pattern</h4>
                <p>Báº£o vá»‡ há»‡ thá»‘ng khá»i cascade failures:</p>
                <ul>
                    <li><strong>Fail Fast:</strong> Ngá»«ng gá»i service bá»‹ lá»—i Ä‘á»ƒ trÃ¡nh timeout</li>
                    <li><strong>Fallback Mechanism:</strong> Tráº£ vá» cached data hoáº·c default response</li>
                    <li><strong>Health Check:</strong> Tá»± Ä‘á»™ng phá»¥c há»“i khi service hoáº¡t Ä‘á»™ng trá»Ÿ láº¡i</li>
                </ul>
                
                <h4 style="color: #e74c3c;">Saga Pattern</h4>
                <p>Quáº£n lÃ½ distributed transactions:</p>
                <ul>
                    <li><strong>Choreography:</strong> Services tá»± phá»‘i há»£p thÃ´ng qua events</li>
                    <li><strong>Orchestration:</strong> Central coordinator Ä‘iá»u phá»‘i transaction</li>
                    <li><strong>Compensation:</strong> Rollback operations khi cÃ³ lá»—i</li>
                </ul>
                
                <h4 style="color: #e74c3c;">CQRS (Command Query Responsibility Segregation)</h4>
                <p>TÃ¡ch biá»‡t read vÃ  write operations:</p>
                <ul>
                    <li><strong>Command Side:</strong> Xá»­ lÃ½ business logic vÃ  write operations</li>
                    <li><strong>Query Side:</strong> Optimized cho read operations vÃ  reporting</li>
                    <li><strong>Event Sourcing:</strong> LÆ°u trá»¯ events thay vÃ¬ state</li>
                </ul>
            </div>

            <h3 id="scalability">ğŸš€ Scalability vÃ  Performance</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #f39c12;">Horizontal Scaling</h4>
                <p>Má»—i service cÃ³ thá»ƒ scale Ä‘á»™c láº­p:</p>
                <ul>
                    <li><strong>Load Balancing:</strong> Distribute traffic across multiple instances</li>
                    <li><strong>Auto Scaling:</strong> Tá»± Ä‘á»™ng tÄƒng/giáº£m instances dá»±a trÃªn metrics</li>
                    <li><strong>Resource Optimization:</strong> Má»—i service cÃ³ thá»ƒ cÃ³ resource requirements khÃ¡c nhau</li>
                </ul>
                
                <h4 style="color: #f39c12;">Caching Strategy</h4>
                <p>Multi-level caching cho performance tá»‘i Æ°u:</p>
                <ul>
                    <li><strong>Redis Cluster:</strong> Distributed caching cho session vÃ  frequently accessed data</li>
                    <li><strong>CDN:</strong> Cache static content vÃ  API responses</li>
                    <li><strong>Database Query Cache:</strong> Cache expensive database queries</li>
                </ul>
                
                <h4 style="color: #f39c12;">Asynchronous Processing</h4>
                <p>Non-blocking operations cho better throughput:</p>
                <ul>
                    <li><strong>Message Queues:</strong> RabbitMQ/Kafka cho async communication</li>
                    <li><strong>Event Streaming:</strong> Real-time data processing</li>
                    <li><strong>Background Jobs:</strong> Heavy processing tasks</li>
                </ul>
            </div>

            <h3 id="security">ğŸ”’ Security vÃ  Monitoring</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #9b59b6;">Security Best Practices</h4>
                <ul>
                    <li><strong>Zero Trust Architecture:</strong> Verify every request, khÃ´ng trust internal network</li>
                    <li><strong>JWT Tokens:</strong> Stateless authentication vá»›i proper expiration</li>
                    <li><strong>API Rate Limiting:</strong> Prevent abuse vÃ  DDoS attacks</li>
                    <li><strong>Service Mesh:</strong> Encrypted communication giá»¯a services</li>
                </ul>
                
                <h4 style="color: #9b59b6;">Observability</h4>
                <ul>
                    <li><strong>Distributed Tracing:</strong> Track requests across multiple services</li>
                    <li><strong>Centralized Logging:</strong> ELK Stack cho log aggregation</li>
                    <li><strong>Metrics Collection:</strong> Prometheus + Grafana cho monitoring</li>
                    <li><strong>Health Checks:</strong> Automated health monitoring cho táº¥t cáº£ services</li>
                </ul>
            </div>

            <h3 id="ddd">ğŸ¯ Domain-Driven Design (DDD)</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #1abc9c;">Bounded Contexts</h4>
                <p>Má»—i microservice Ä‘áº¡i diá»‡n cho má»™t bounded context:</p>
                <ul>
                    <li><strong>E-commerce Context:</strong> Cart, Product, Payment Services</li>
                    <li><strong>Content Management Context:</strong> News, Communication Log Services</li>
                    <li><strong>User Management Context:</strong> User, Admin Services</li>
                    <li><strong>Agent Management Context:</strong> Agent Management, Agent Policy Services</li>
                </ul>
                
                <h4 style="color: #1abc9c;">Aggregates vÃ  Entities</h4>
                <ul>
                    <li><strong>Cart Aggregate:</strong> Cart + CartItems vá»›i business rules</li>
                    <li><strong>User Aggregate:</strong> User + Profile + Permissions</li>
                    <li><strong>Order Aggregate:</strong> Order + OrderItems + Payment Status</li>
                </ul>
            </div>

            <h3 id="devops">ğŸ”§ DevOps vÃ  Deployment</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #e67e22;">Containerization</h4>
                <ul>
                    <li><strong>Docker:</strong> Má»—i service cháº¡y trong container riÃªng</li>
                    <li><strong>Kubernetes:</strong> Orchestration, service discovery, load balancing</li>
                    <li><strong>Helm Charts:</strong> Package management cho Kubernetes deployments</li>
                </ul>
                
                <h4 style="color: #e67e22;">CI/CD Pipeline</h4>
                <ul>
                    <li><strong>Independent Deployments:</strong> Má»—i service cÃ³ pipeline riÃªng</li>
                    <li><strong>Blue-Green Deployment:</strong> Zero-downtime deployments</li>
                    <li><strong>Canary Releases:</strong> Gradual rollout vá»›i monitoring</li>
                </ul>
            </div>

            <h3 id="optimization">âš¡ Performance Optimization</h3>
            <div style="background: rgba(44, 62, 80, 0.8); padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #3498db;">Database Optimization</h4>
                <ul>
                    <li><strong>Read Replicas:</strong> Separate read vÃ  write databases</li>
                    <li><strong>Database Sharding:</strong> Horizontal partitioning cho large datasets</li>
                    <li><strong>Connection Pooling:</strong> Efficient database connection management</li>
                </ul>
                
                <h4 style="color: #3498db;">API Optimization</h4>
                <ul>
                    <li><strong>GraphQL:</strong> Flexible data fetching, reduce over-fetching</li>
                    <li><strong>API Versioning:</strong> Backward compatibility vá»›i proper deprecation</li>
                    <li><strong>Response Compression:</strong> Gzip/Brotli compression cho API responses</li>
                </ul>
            </div>
        </div>

        <div class="doc-section" id="backend">
            <h2>ğŸ“Š Tá»•ng káº¿t Kiáº¿n trÃºc</h2>
            <p><strong>Tá»•ng cá»™ng: 58 thÃ nh pháº§n táº¡o thÃ nh 13 á»©ng dá»¥ng Ä‘á»™c láº­p + 1 Infrastructure Layer</strong></p>
            <ul>
                <li><strong>á»¨ng dá»¥ng Nghiá»‡p vá»¥ Äá»™c láº­p:</strong> 12 á»©ng dá»¥ng (36 khá»‘i)</li>
                <li><strong>á»¨ng dá»¥ng Há»— trá»£:</strong> 1 á»©ng dá»¥ng Shell Config (2 khá»‘i)</li>
                <li><strong>Shared Infrastructure:</strong> 20 khá»‘i (API Gateway, Message Broker, Cache, Shell Apps, Infrastructure Layer)</li>
            </ul>
            <p>Kiáº¿n trÃºc nÃ y Ä‘áº£m báº£o tÃ­nh <strong>scalability</strong>, <strong>maintainability</strong> vÃ  <strong>independence</strong> cá»§a tá»«ng á»©ng dá»¥ng, cho phÃ©p phÃ¡t triá»ƒn vÃ  triá»ƒn khai hoÃ n toÃ n Ä‘á»™c láº­p.</p>
        </div>
        </div>
            </div>
        </div>
    </div>

    <div class="container" id="diagramContainer">
        <h1>SÆ¡ Ä‘á»“ Kiáº¿n trÃºc Microservice</h1>
        
        <!-- Toolbar cÃ´ng cá»¥ -->
        <div class="toolbar">
            <button class="tool-btn" data-tooltip="PhÃ³ng to" onclick="zoomIn()">ğŸ”+</button>
            <button class="tool-btn" data-tooltip="Thu nhá»" onclick="zoomOut()">ğŸ”-</button>
            <button class="tool-btn reset" data-tooltip="Äáº·t láº¡i" onclick="resetView()">ğŸ </button>
            <button class="tool-btn" data-tooltip="Fit mÃ n hÃ¬nh" onclick="fitToScreen()">ğŸ“</button>
        </div>
        
        <!-- Zoom indicator -->
        <div class="zoom-indicator" id="zoomIndicator">100%</div>
        
        <!-- Container cho diagram -->
        <div class="diagram-container" id="diagramContainer">
            <div class="mermaid" id="mermaidDiagram">
graph TB
    subgraph "Frontend Applications"
        direction TB
        ShellAppUser[Shell App User]
        ShellAppAdmin[Shell App Admin]
        
        subgraph "User Frontend Components"
            direction TB
            CartFE[Cart Service Frontend<br>Giao diá»‡n Giá» hÃ ng]:::frontend
            ProductFE[Product Service Frontend<br>Giao diá»‡n Sáº£n pháº©m]:::frontend
            NewsFE[News Service Frontend<br>Giao diá»‡n Tin tá»©c]:::frontend
            DesignCalculationFE[Design Calculation Frontend<br>Giao diá»‡n TÃ­nh toÃ¡n Thiáº¿t káº¿]:::frontend
            FootballFE[Football Service Frontend<br>Giao diá»‡n BÃ³ng Ä‘Ã¡]:::frontend
            CommunicationLogFE[Communication Log Frontend<br>Giao diá»‡n Nháº­t kÃ½ thi cÃ´ng]:::frontend
            ChatbotFE[Chatbot Service Frontend<br>Giao diá»‡n Chatbot]:::frontend
            PaymentFE[Payment Service Frontend<br>Giao diá»‡n Thanh toÃ¡n]:::frontend
            UserFE[User Service Frontend<br>Giao diá»‡n NgÆ°á»i dÃ¹ng]:::frontend
            AdminFE[Admin Service Frontend<br>Giao diá»‡n Quáº£n trá»‹]:::frontend
            AgentManagementFE[Agent Management Frontend<br>Giao diá»‡n Quáº£n lÃ½ Äáº¡i lÃ½]:::frontend
            AgentPolicyFE[Agent Policy Frontend<br>Giao diá»‡n ChÃ­nh sÃ¡ch Äáº¡i lÃ½]:::frontend
        end
        
        subgraph "Admin Frontend Components"
            direction TB
            CartAdminFE[Cart Service Admin<br>Quáº£n trá»‹ Giá» hÃ ng]:::adminfe
            ProductAdminFE[Product Service Admin<br>Quáº£n trá»‹ Sáº£n pháº©m]:::adminfe
            NewsAdminFE[News Service Admin<br>Quáº£n trá»‹ Tin tá»©c]:::adminfe
            DesignCalculationAdminFE[Design Calculation Admin<br>Quáº£n trá»‹ TÃ­nh toÃ¡n Thiáº¿t káº¿]:::adminfe
            FootballAdminFE[Football Service Admin<br>Quáº£n trá»‹ BÃ³ng Ä‘Ã¡]:::adminfe
            CommunicationLogAdminFE[Communication Log Admin<br>Quáº£n trá»‹ Nháº­t kÃ½ thi cÃ´ng]:::adminfe
            ChatbotAdminFE[Chatbot Service Admin<br>Quáº£n trá»‹ Chatbot]:::adminfe
            PaymentAdminFE[Payment Service Admin<br>Quáº£n trá»‹ Thanh toÃ¡n]:::adminfe
            UserAdminFE[User Service Admin<br>Quáº£n trá»‹ NgÆ°á»i dÃ¹ng]:::adminfe
            AdminAdminFE[Admin Service Admin<br>Quáº£n trá»‹ Há»‡ thá»‘ng]:::adminfe
            AgentManagementAdminFE[Agent Management Admin<br>Quáº£n trá»‹ Äáº¡i lÃ½]:::adminfe
            AgentPolicyAdminFE[Agent Policy Admin<br>Quáº£n trá»‹ ChÃ­nh sÃ¡ch Äáº¡i lÃ½]:::adminfe
            ShellConfigAdminFE[Shell Config Admin<br>Quáº£n trá»‹ Cáº¥u hÃ¬nh Shell]:::adminfe
        end
    end

    %% Táº¡o khoáº£ng cÃ¡ch Ä‘á»ƒ Ä‘áº©y hÃ ng trÃªn lÃªn cao
    SPACER1[ ]:::invisible
    SPACER2[ ]:::invisible
    SPACER3[ ]:::invisible
    SPACER4[ ]:::invisible
    SPACER5[ ]:::invisible
    SPACER6[ ]:::invisible
    SPACER7[ ]:::invisible
    SPACER8[ ]:::invisible

    subgraph "API Gateway (Cá»•ng API)"
        direction TB
        APIGatewayUser[API Gateway User]
        APIGatewayAdmin[API Gateway Admin]
    end

    subgraph "Backend Microservices (CÃ¡c dá»‹ch vá»¥ Ä‘á»™c láº­p)"
            CartService(Cart Service<br>Dá»‹ch vá»¥ Giá» hÃ ng):::group1
        ProductService(Product Service<br>Dá»‹ch vá»¥ Sáº£n pháº©m):::group1
        NewsService(News Service<br>Dá»‹ch vá»¥ Tin tá»©c):::group1
        
            DesignCalculationService(Design Calculation Service<br>Dá»‹ch vá»¥ TÃ­nh toÃ¡n Thiáº¿t káº¿):::group2
        FootballService(Football Service<br>Dá»‹ch vá»¥ BÃ³ng Ä‘Ã¡):::group2
        CommunicationLogService(Communication Log Service<br>Dá»‹ch vá»¥ Nháº­t kÃ½ thi cÃ´ng):::group2
        ChatbotService(Chatbot Service<br>Dá»‹ch vá»¥ Chatbot):::group2
        
            PaymentService(Payment Service<br>Dá»‹ch vá»¥ Thanh toÃ¡n):::group3
        UserService(User Service<br>Dá»‹ch vá»¥ NgÆ°á»i dÃ¹ng):::group3
        ShellConfigService(Shell Config Service<br>Dá»‹ch vá»¥ Cáº¥u hÃ¬nh Shell):::group3
        AdminService(Admin Service<br>Dá»‹ch vá»¥ Quáº£n trá»‹):::group3
        
            AgentManagementService(Agent Management Service<br>Dá»‹ch vá»¥ Quáº£n lÃ½ Äáº¡i lÃ½):::group4
        AgentPolicyService(Agent Policy Service<br>Dá»‹ch vá»¥ ChÃ­nh sÃ¡ch Äáº¡i lÃ½):::group4
    end

    subgraph "Infrastructure (Háº¡ táº§ng)"
        direction TB
        MessageBroker(Message Broker)
        Cache(Cache)
        
        subgraph "Databases"
            direction TB
            CartDB[Cart DB]:::newdb
            ProductDB[Product DB]:::newdb
            NewsDB[News DB]:::newdb
            DesignCalculationDB[Design Calculation DB]
            FootballDB[Football DB]:::newdb
            CommunicationLogDB[Communication Log DB]:::newdb
            ChatbotDB[Chatbot DB]
            PaymentDB[Payment DB]
            UserDB[User DB]
            ShellConfigDB[Shell Config DB]:::newdb
            AdminDB[Admin DB]
            AgentManagementDB[Agent Management DB]
            AgentPolicyDB[Agent Policy DB]
        end
    end

    ShellAppUser --> APIGatewayUser
    ShellAppAdmin --> APIGatewayAdmin
    
    %% Shell App User loads cÃ¡c frontend components
    ShellAppUser --> CartFE
    ShellAppUser --> ProductFE
    ShellAppUser --> NewsFE
    ShellAppUser --> DesignCalculationFE
    ShellAppUser --> FootballFE
    ShellAppUser --> CommunicationLogFE
    ShellAppUser --> ChatbotFE
    ShellAppUser --> PaymentFE
    ShellAppUser --> UserFE
    ShellAppUser --> AdminFE
    ShellAppUser --> AgentManagementFE
    ShellAppUser --> AgentPolicyFE

    %% Shell App Admin loads cÃ¡c admin frontend components
    ShellAppAdmin --> CartAdminFE
    ShellAppAdmin --> ProductAdminFE
    ShellAppAdmin --> NewsAdminFE
    ShellAppAdmin --> DesignCalculationAdminFE
    ShellAppAdmin --> FootballAdminFE
    ShellAppAdmin --> CommunicationLogAdminFE
    ShellAppAdmin --> ChatbotAdminFE
    ShellAppAdmin --> PaymentAdminFE
    ShellAppAdmin --> UserAdminFE
    ShellAppAdmin --> AdminAdminFE
    ShellAppAdmin --> AgentManagementAdminFE
    ShellAppAdmin --> AgentPolicyAdminFE
    ShellAppAdmin --> ShellConfigAdminFE

    %% Frontend components káº¿t ná»‘i vá»›i backend services thÃ´ng qua API Gateway
    CartFE --> APIGatewayUser
    ProductFE --> APIGatewayUser
    NewsFE --> APIGatewayUser
    DesignCalculationFE --> APIGatewayUser
    FootballFE --> APIGatewayUser
    CommunicationLogFE --> APIGatewayUser
    ChatbotFE --> APIGatewayUser
    PaymentFE --> APIGatewayUser
    UserFE --> APIGatewayUser
    AdminFE --> APIGatewayUser
    AgentManagementFE --> APIGatewayUser
    AgentPolicyFE --> APIGatewayUser

    %% Admin Frontend components káº¿t ná»‘i vá»›i backend services thÃ´ng qua API Gateway Admin
    CartAdminFE --> APIGatewayAdmin
    ProductAdminFE --> APIGatewayAdmin
    NewsAdminFE --> APIGatewayAdmin
    DesignCalculationAdminFE --> APIGatewayAdmin
    FootballAdminFE --> APIGatewayAdmin
    CommunicationLogAdminFE --> APIGatewayAdmin
    ChatbotAdminFE --> APIGatewayAdmin
    PaymentAdminFE --> APIGatewayAdmin
    UserAdminFE --> APIGatewayAdmin
    AdminAdminFE --> APIGatewayAdmin
    AgentManagementAdminFE --> APIGatewayAdmin
    AgentPolicyAdminFE --> APIGatewayAdmin
    ShellConfigAdminFE --> APIGatewayAdmin

    APIGatewayUser --> CartService
    APIGatewayUser --> ProductService
    APIGatewayUser --> NewsService
    APIGatewayUser --> FootballService
    APIGatewayUser --> ChatbotService
    APIGatewayUser --> PaymentService
    APIGatewayUser --> UserService
    
    APIGatewayAdmin --> CartService
    APIGatewayAdmin --> ProductService
    APIGatewayAdmin --> NewsService
    APIGatewayAdmin --> DesignCalculationService
    APIGatewayAdmin --> FootballService
    APIGatewayAdmin --> CommunicationLogService
    APIGatewayAdmin --> ChatbotService
    APIGatewayAdmin --> PaymentService
    APIGatewayAdmin --> UserService
    APIGatewayAdmin --> ShellConfigService
    APIGatewayAdmin --> AdminService
    APIGatewayAdmin --> AgentManagementService
    APIGatewayAdmin --> AgentPolicyService

    AdminService --> UserService
    AdminService --> PaymentService
    AdminService --> AgentPolicyService
    AdminService --> AgentManagementService
    AdminService --> ProductService
    AdminService --> CartService
    AdminService --> NewsService
    AgentPolicyService --> PaymentService
    CartService --> ProductService
    CartService --> UserService
    CartService --> PaymentService
    FootballService --> UserService
    CommunicationLogService --> AdminService
    ShellConfigService --> AdminService

    PaymentService --> MessageBroker
    UserService --> MessageBroker
    AgentPolicyService --> Cache
    CartService --> MessageBroker
    ProductService --> Cache
    NewsService --> Cache
    FootballService --> Cache
    ShellConfigService --> Cache

    CartService --> CartDB
    ProductService --> ProductDB
    NewsService --> NewsDB
    DesignCalculationService --> DesignCalculationDB
    FootballService --> FootballDB
    CommunicationLogService --> CommunicationLogDB
    ChatbotService --> ChatbotDB
    PaymentService --> PaymentDB
    UserService --> UserDB
    ShellConfigService --> ShellConfigDB
    AdminService --> AdminDB
    AgentManagementService --> AgentManagementDB
    AgentPolicyService --> AgentPolicyDB

    %% Infrastructure Layer - Ná»n táº£ng háº¡ táº§ng Ä‘á»™c láº­p
    subgraph "ğŸ—ï¸ Infrastructure Layer"
        direction TB
        InfrastructureBase[Infrastructure<br/>Ná»n táº£ng háº¡ táº§ng<br/>Docker, Kubernetes, Cloud Services<br/>Monitoring, Logging, Security]:::infrastructure
    end

    classDef group1 fill:#E6F3FF,stroke:#333,stroke-width:2px
    classDef group2 fill:#F0FFF0,stroke:#333,stroke-width:2px
    classDef group3 fill:#FFF0F5,stroke:#333,stroke-width:2px
    classDef group4 fill:#F5F5DC,stroke:#333,stroke-width:2px
    classDef newdb fill:#FFE4B5,stroke:#333,stroke-width:2px
    classDef frontend fill:#E6E6FA,stroke:#4B0082,stroke-width:2px
    classDef adminfe fill:#FFE4E1,stroke:#DC143C,stroke-width:2px
    classDef infrastructure fill:#F5F5F5,stroke:#2C3E50,stroke-width:3px
    
    %% Äá»‹nh nghÄ©a mÃ u ná»n cho subgraph
    classDef subgraph1 fill:#E3F2FD,stroke:#333,stroke-width:2px
    classDef subgraph2 fill:#E8F5E8,stroke:#333,stroke-width:2px  
    classDef subgraph3 fill:#F3E5F5,stroke:#333,stroke-width:2px
    classDef subgraph4 fill:#FFF3E0,stroke:#333,stroke-width:2px
    
    %% áº¨n cÃ¡c spacer nodes
    classDef invisible fill:transparent,stroke:transparent,color:transparent
            </div>
        </div>
        


    </div>

    <script>
        // Biáº¿n toÃ n cá»¥c cho zoom vÃ  pan
        let currentZoom = 1;
        let currentX = 0;
        let currentY = 0;
        let isDragging = false;
        let lastMouseX = 0;
        let lastMouseY = 0;
        
        // Khá»Ÿi táº¡o Mermaid vá»›i custom theme
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                clusterBkg: '#E3F2FD',
                clusterBorder: '#333'
            },
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true
            }
        });
        
        // HÃ m cáº­p nháº­t transform
        function updateTransform() {
            const mermaidElement = document.getElementById('mermaidDiagram');
            mermaidElement.style.transform = `translate(${currentX}px, ${currentY}px) scale(${currentZoom})`;
            document.getElementById('zoomIndicator').textContent = Math.round(currentZoom * 100) + '%';
        }
        
        // HÃ m zoom in
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            updateTransform();
        }
        
        // HÃ m zoom out
        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.1);
            updateTransform();
        }
        
        // HÃ m reset view
        function resetView() {
            currentZoom = 1;
            currentX = 0;
            currentY = 0;
            updateTransform();
        }
        
        // HÃ m fit to screen
        function fitToScreen() {
            const container = document.getElementById('diagramContainer');
            const mermaidElement = document.getElementById('mermaidDiagram');
            const svg = mermaidElement.querySelector('svg');
            
            if (svg) {
                const containerRect = container.getBoundingClientRect();
                const svgRect = svg.getBoundingClientRect();
                
                const scaleX = containerRect.width / svgRect.width;
                const scaleY = containerRect.height / svgRect.height;
                currentZoom = Math.min(scaleX, scaleY) * 0.9;
                
                currentX = (containerRect.width - svgRect.width * currentZoom) / 2;
                currentY = (containerRect.height - svgRect.height * currentZoom) / 2;
                
                updateTransform();
            }
        }
        
        // Xá»­ lÃ½ sá»± kiá»‡n chuá»™t cho pan
        document.getElementById('diagramContainer').addEventListener('mousedown', function(e) {
            if (e.button === 0) { // Left mouse button
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                this.classList.add('panning');
                e.preventDefault();
            }
        });
        
        document.addEventListener('mousemove', function(e) {
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                
                currentX += deltaX;
                currentY += deltaY;
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                
                updateTransform();
            }
        });
        
        document.addEventListener('mouseup', function(e) {
            if (isDragging) {
                isDragging = false;
                document.getElementById('diagramContainer').classList.remove('panning');
            }
        });
        
        // Xá»­ lÃ½ zoom báº±ng scroll wheel
        document.getElementById('diagramContainer').addEventListener('wheel', function(e) {
            e.preventDefault();
            
            const rect = this.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            const oldZoom = currentZoom;
            
            if (e.deltaY < 0) {
                currentZoom = Math.min(currentZoom * 1.1, 3);
            } else {
                currentZoom = Math.max(currentZoom / 1.1, 0.1);
            }
            
            // Zoom vá» phÃ­a con trá» chuá»™t
            const zoomRatio = currentZoom / oldZoom;
            currentX = mouseX - (mouseX - currentX) * zoomRatio;
            currentY = mouseY - (mouseY - currentY) * zoomRatio;
            
            updateTransform();
        });
        
        // Xá»­ lÃ½ phÃ­m táº¯t
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case '+':
                case '=':
                    zoomIn();
                    e.preventDefault();
                    break;
                case '-':
                    zoomOut();
                    e.preventDefault();
                    break;
                case '0':
                    resetView();
                    e.preventDefault();
                    break;
                case 'f':
                case 'F':
                    fitToScreen();
                    e.preventDefault();
                    break;
            }
        });
        
        // HÃ m thay Ä‘á»•i mÃ u ná»n subgraph
        function changeSubgraphColors() {
            const svg = document.querySelector('#mermaidDiagram svg');
            if (!svg) return;
            
            // TÃ¬m táº¥t cáº£ cÃ¡c cluster (subgraph backgrounds) - thá»­ nhiá»u cÃ¡ch
            let clusters = svg.querySelectorAll('.cluster rect');
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('g.cluster rect');
            }
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('rect[fill="#FFFFDE"]');
            }
            if (clusters.length === 0) {
                clusters = svg.querySelectorAll('rect');
            }
            
            console.log('Found', clusters.length, 'cluster elements');
            
            // Äá»‹nh nghÄ©a 4 mÃ u nháº¡t khÃ¡c nhau
            const colors = [
                '#E3F2FD', // Xanh lam nháº¡t - Frontend Applications
                '#E8F5E8', // Xanh lÃ¡ nháº¡t - API Gateway  
                '#F3E5F5', // TÃ­m nháº¡t - Backend Microservices
                '#FFF3E0'  // Cam nháº¡t - Infrastructure
            ];
            
            // Lá»c chá»‰ láº¥y cÃ¡c rect lá»›n (subgraph backgrounds)
            const largeClusters = Array.from(clusters).filter(rect => {
                const width = parseFloat(rect.getAttribute('width') || 0);
                const height = parseFloat(rect.getAttribute('height') || 0);
                return width > 200 && height > 100; // Chá»‰ láº¥y cÃ¡c rect lá»›n
            });
            
            console.log('Found', largeClusters.length, 'large cluster backgrounds');
            
            // Ãp dá»¥ng mÃ u cho tá»«ng cluster lá»›n
            largeClusters.forEach((rect, index) => {
                if (index < colors.length) {
                    rect.setAttribute('fill', colors[index]);
                    rect.setAttribute('opacity', '0.4');
                    console.log(`Applied color ${colors[index]} to cluster ${index}`);
                }
            });
        }
        
        // Render Mermaid
        mermaid.run().then(() => {
            console.log('Mermaid diagram rendered successfully');
            
            // Thay Ä‘á»•i mÃ u ná»n sau khi render - thá»­ nhiá»u láº§n
            setTimeout(() => {
                changeSubgraphColors();
                fitToScreen();
            }, 500);
            
            setTimeout(() => {
                changeSubgraphColors();
            }, 1000);
            
            setTimeout(() => {
                changeSubgraphColors();
            }, 2000);
        }).catch(err => {
            console.error('Mermaid rendering error:', err);
            document.getElementById('mermaidDiagram').innerHTML = '<p style="color: red; text-align: center; margin-top: 50px;">Error rendering diagram. Please refresh the page.</p>';
        });
        
        // NgÄƒn context menu khi right click
        document.getElementById('diagramContainer').addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        // Documentation zoom and pan variables
        let docScale = 1;
        let docTranslateX = 0;
        let docTranslateY = 0;
        let isDocDragging = false;
        let lastDocMouseX = 0;
        let lastDocMouseY = 0;

        // HÃ m chuyá»ƒn Ä‘á»•i giá»¯a sÆ¡ Ä‘á»“ vÃ  tÃ i liá»‡u
        function showDocumentation() {
            document.getElementById('diagramContainer').style.display = 'none';
            document.getElementById('docContainer').style.display = 'block';
            initDocumentationControls();
        }
        
        function showDiagram() {
            document.getElementById('docContainer').style.display = 'none';
            document.getElementById('diagramContainer').style.display = 'block';
        }

        function initDocumentationControls() {
            const docPage = document.getElementById('documentationPage');
            const docContainer = document.getElementById('docContainer');
            
            // Mouse wheel zoom for documentation
            docContainer.addEventListener('wheel', function(e) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.1 : 0.1;
                docScale = Math.max(0.5, Math.min(3, docScale + delta));
                updateDocTransform();
            });

            // Mouse drag pan for documentation
            docPage.addEventListener('mousedown', function(e) {
                if (e.button === 0) { // Left mouse button
                    isDocDragging = true;
                    lastDocMouseX = e.clientX;
                    lastDocMouseY = e.clientY;
                    docPage.style.cursor = 'grabbing';
                    e.preventDefault();
                }
            });

            document.addEventListener('mousemove', function(e) {
                if (isDocDragging) {
                    const deltaX = e.clientX - lastDocMouseX;
                    const deltaY = e.clientY - lastDocMouseY;
                    docTranslateX += deltaX;
                    docTranslateY += deltaY;
                    lastDocMouseX = e.clientX;
                    lastDocMouseY = e.clientY;
                    updateDocTransform();
                }
            });

            document.addEventListener('mouseup', function() {
                if (isDocDragging) {
                    isDocDragging = false;
                    docPage.style.cursor = 'grab';
                }
            });

            // Touch support for mobile
            docPage.addEventListener('touchstart', function(e) {
                if (e.touches.length === 1) {
                    isDocDragging = true;
                    lastDocMouseX = e.touches[0].clientX;
                    lastDocMouseY = e.touches[0].clientY;
                    e.preventDefault();
                }
            });

            docPage.addEventListener('touchmove', function(e) {
                if (isDocDragging && e.touches.length === 1) {
                    e.preventDefault();
                    const deltaX = e.touches[0].clientX - lastDocMouseX;
                    const deltaY = e.touches[0].clientY - lastDocMouseY;
                    docTranslateX += deltaX;
                    docTranslateY += deltaY;
                    lastDocMouseX = e.touches[0].clientX;
                    lastDocMouseY = e.touches[0].clientY;
                    updateDocTransform();
                }
            });

            docPage.addEventListener('touchend', function() {
                isDocDragging = false;
            });

            // Keyboard shortcuts for documentation
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('docContainer').style.display === 'block') {
                    switch(e.key) {
                        case '+':
                        case '=':
                            docZoomIn();
                            e.preventDefault();
                            break;
                        case '-':
                            docZoomOut();
                            e.preventDefault();
                            break;
                        case '0':
                            resetDocZoom();
                            e.preventDefault();
                            break;
                    }
                }
            });
        }

        function updateDocTransform() {
            const docPage = document.getElementById('documentationPage');
            docPage.style.transform = `translate(${docTranslateX}px, ${docTranslateY}px) scale(${docScale})`;
        }

        function docZoomIn() {
            docScale = Math.min(3, docScale + 0.2);
            updateDocTransform();
        }

        function docZoomOut() {
            docScale = Math.max(0.5, docScale - 0.2);
            updateDocTransform();
        }

        function resetDocZoom() {
            docScale = 1;
            docTranslateX = 0;
            docTranslateY = 0;
            updateDocTransform();
        }

        // Alias functions for button clicks
        function zoomIn() {
            if (document.getElementById('docContainer').style.display === 'block') {
                docZoomIn();
            } else {
                // Original diagram zoom in
                currentZoom = Math.min(currentZoom * 1.2, 3);
                updateTransform();
            }
        }

        function zoomOut() {
            if (document.getElementById('docContainer').style.display === 'block') {
                docZoomOut();
            } else {
                // Original diagram zoom out
                currentZoom = Math.max(currentZoom / 1.2, 0.1);
                updateTransform();
            }
        }

        function resetZoom() {
            if (document.getElementById('docContainer').style.display === 'block') {
                resetDocZoom();
            } else {
                // Original diagram reset
                resetView();
            }
        }

        // Navigation functions
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Update active nav link
                document.querySelectorAll('.doc-nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[onclick="scrollToSection('${sectionId}')"]`).classList.add('active');
            }
        }

        // Auto-highlight navigation on scroll
        function updateActiveNavOnScroll() {
            const sections = ['introduction', 'roadmap', 'frontend', 'api-gateway', 'backend', 'infrastructure', 'deployment', 'applications', 'microservice-analysis', 'patterns', 'scalability', 'security', 'ddd', 'devops', 'optimization', 'summary'];
            const docContent = document.querySelector('.doc-content');
            
            if (!docContent) return;
            
            let currentSection = 'introduction';
            
            sections.forEach(sectionId => {
                const element = document.getElementById(sectionId);
                if (element) {
                    const rect = element.getBoundingClientRect();
                    if (rect.top <= 100) {
                        currentSection = sectionId;
                    }
                }
            });
            
            // Update active nav link
            document.querySelectorAll('.doc-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            const activeLink = document.querySelector(`[onclick="scrollToSection('${currentSection}')"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        // Add scroll listener for documentation
        document.addEventListener('DOMContentLoaded', function() {
            const docContent = document.querySelector('.doc-content');
            if (docContent) {
                docContent.addEventListener('scroll', updateActiveNavOnScroll);
            }
        });
    </script>
</body>
</html>
